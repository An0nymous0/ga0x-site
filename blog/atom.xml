<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.ga0x.com/blog</id>
    <title>An0nymous Blog</title>
    <updated>2023-02-02T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://www.ga0x.com/blog"/>
    <subtitle>An0nymous Blog</subtitle>
    <icon>https://www.ga0x.com/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[注册ChatGPT 教你解决地区问题]]></title>
        <id>https://www.ga0x.com/blog/2023/02/02/register-openai</id>
        <link href="https://www.ga0x.com/blog/2023/02/02/register-openai"/>
        <updated>2023-02-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[国内注册 ChatGPT 会出现提示 not available in your country 也就是你所在的国家无法注册  现在教你如何解决。]]></summary>
        <content type="html"><![CDATA[<p>国内注册 <strong>ChatGPT</strong> 会出现提示 not available in your country 也就是你所在的国家无法注册  现在教你如何解决。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="需要">需要<a href="#需要" class="hash-link" aria-label="需要的直接链接" title="需要的直接链接">​</a></h2><ol><li>代理  注意不能是中国或香港，最好用 美国或者日本的</li><li>需要一个国外的手机号， 我们通过在线短信平台接码来解决 <a href="https://sms-activate.org/?ref=2684538" target="_blank" rel="noopener noreferrer">sms-activate.org</a> （需要充1美元）</li></ol><h2 class="anchor anchorWithStickyNavbar_er05" id="开始">开始<a href="#开始" class="hash-link" aria-label="开始的直接链接" title="开始的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_er05" id="第一步-注册-sms-activate-并充值">第一步 注册 <strong>SMS-ACTIVATE 并充值</strong><a href="#第一步-注册-sms-activate-并充值" class="hash-link" aria-label="第一步-注册-sms-activate-并充值的直接链接" title="第一步-注册-sms-activate-并充值的直接链接">​</a></h2><p>打开 <a href="https://sms-activate.org/?ref=2684538" target="_blank" rel="noopener noreferrer">sms-activate.org</a> ，注册帐号</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled-37e2cc5dde6992ac90718340baa3b53b.png" width="1054" height="996" class="img_Ne1E"></p><p>充值</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 1-cd9d556a3e6554a9a89d332b47a081e2.png" width="788" height="438" class="img_Ne1E"></p><p>接收一次OpenAI的验证码成本大概在7~10卢布（人民币1块钱左右），平台只接受美金，所以我们充值1美金就够了 大概7人民币。</p><p>我们选择充值渠道 这里我选的支付宝</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 2-567005ff9ed0456236c39b97e7865460.png" width="1002" height="1018" class="img_Ne1E"></p><p>充值完毕之后我们先回到OpenAI的页面一会再回来操作</p><h2 class="anchor anchorWithStickyNavbar_er05" id="第二步-注册openai">第二步 注册OpenAI<a href="#第二步-注册openai" class="hash-link" aria-label="第二步 注册OpenAI的直接链接" title="第二步 注册OpenAI的直接链接">​</a></h2><blockquote><p><strong>注意一定要挂代理访问 前面有提到</strong></p></blockquote><p>我们打开<a href="https://beta.openai.com/signup" target="_blank" rel="noopener noreferrer">OpenAI的注册页面</a>。 邮箱gmail或者国内的都可以。</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled-3163c32f6fc7edbcd16dce7e4da68a30.webp" width="1092" height="1006" class="img_Ne1E"></p><p>填写完成之后点击Continue，然后会给你注册的邮箱发一个邮件 点击注册 填写基本信息。</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 1-874e58e27f2e7836af64519041eb8738.webp" width="1110" height="702" class="img_Ne1E"></p><h3 class="anchor anchorWithStickyNavbar_er05" id="填写手机号">填写手机号<a href="#填写手机号" class="hash-link" aria-label="填写手机号的直接链接" title="填写手机号的直接链接">​</a></h3><p>截图里是韩国 我们要选择印度（India）。</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 2-c97d4f5fc0be06a631b49e4dd0eff0ef.webp" width="922" height="452" class="img_Ne1E"></p><p>回到我们接码的平台在左侧列表选择OpenAI服务 然后选择印度 <strong>点击购物车</strong></p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 3-f1a3ff8bc02ebc79294af28a9d36f11d.png" width="632" height="1678" class="img_Ne1E"></p><p>跳转到此页面我们 <strong>激活通过短信</strong> 下会有你刚才加入购物车的手机号 我们复制粘贴到OpenAI注册页面等待<strong>短信验证码</strong>回填</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 4-f98bfc25345771f780488844b82976c0.png" width="1804" height="1158" class="img_Ne1E"></p><p>填写完验证码之后 这个页面我们随便选一个选项就行</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 3-ede7b1bf41cb4fea711e0599f62d3383.webp" width="1234" height="696" class="img_Ne1E"></p><p>完成之后 我们就可以尽情体验<strong>ChatGPT</strong>了</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 5-c4733ca13515a64ec820b5b16aaf50f3.png" width="3022" height="1558" class="img_Ne1E"></p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="ChatGPT" term="ChatGPT"/>
        <category label="OpenAI" term="OpenAI"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[macOS管理多个Java JDK 版本]]></title>
        <id>https://www.ga0x.com/blog/2022/09/29/how-to-manage-multiple-java-versions-on-mac</id>
        <link href="https://www.ga0x.com/blog/2022/09/29/how-to-manage-multiple-java-versions-on-mac"/>
        <updated>2022-09-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[通过配置系统文件 alias 切换]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_er05" id="通过配置系统文件-alias-切换">通过配置系统文件 alias 切换<a href="#通过配置系统文件-alias-切换" class="hash-link" aria-label="通过配置系统文件 alias 切换的直接链接" title="通过配置系统文件 alias 切换的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_er05" id="通过-homebrew-安装-java-jdk">通过 Homebrew 安装 Java JDK<a href="#通过-homebrew-安装-java-jdk" class="hash-link" aria-label="通过 Homebrew 安装 Java JDK的直接链接" title="通过 Homebrew 安装 Java JDK的直接链接">​</a></h3><p><a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">使用Homebrew</a>安装多个 Java JDK 版本。要安装 Homebrew 运行：</p><div class="language-bash codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-bash codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">/bin/bash -c </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">curl</span><span class="token string variable" style="color:#36acaa"> -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">"</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在使用以下命令安装 Java JDK&nbsp;<strong>11</strong>或更高版本<code>brew cask</code>：</p><div class="language-bash codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-bash codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --cask temurin</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># latest version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --cask temurin</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_t2Hc"><div class="admonitionHeading_F_6S"><span class="admonitionIcon_LHTy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_oaIG"><p>JDK 版本&nbsp;<strong>8</strong>、<strong>9</strong>、<strong>10</strong>和<strong>11</strong>不再受支持。</p></div></div><p><a href="https://adoptium.net/" target="_blank" rel="noopener noreferrer">Adoptium</a>提供较旧的 Java 版本。从 Adoptium 安装 Java JDK：</p><div class="language-bash codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-bash codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># install from third party repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew tap homebrew/cask-versions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --cask temurin</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Java 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --cask temurin8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Java 11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --cask temurin11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Java 17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --cask temurin17</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="通过别名切换-java-jdk">通过别名切换 Java JDK<a href="#通过别名切换-java-jdk" class="hash-link" aria-label="通过别名切换 Java JDK的直接链接" title="通过别名切换 Java JDK的直接链接">​</a></h3><p>在您的或您的主要 Java 版本中设置<code>JAVA_HOME</code>路径，并为每个已安装的 Java 版本添加导出。<code>.zshrc</code> <code>.bash_profile</code></p><div class="language-bash codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-bash codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">/usr/libexec/java_home -v17</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_8_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">/usr/libexec/java_home -v1.8</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_11_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">/usr/libexec/java_home -v11</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_17_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">/usr/libexec/java_home -v17</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查默认 Java 版本和安装路径：</p><div class="language-bash codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-bash codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">java -version </span><span class="token comment" style="color:#999988;font-style:italic"># 17</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>.zshrc</code>为您的或<code>.bash_profile</code>为每个已安装的 Java 版本添加一个别名。别名<code>JAVA_HOME</code>与选定的<code>JAVA_VERSION_HOME</code>.</p><div class="language-bash codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-bash codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">java8</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'export JAVA_HOME=$JAVA_8_HOME'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">java11</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'export JAVA_HOME=$JAVA_11_HOME'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">java17</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'export JAVA_HOME=$JAVA_17_HOME'</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在，要在 Java 版本之间切换，请在终端中输入别名<code>java8</code>。执行<code>java -version</code>以验证您现在使用的是正确的 Java 版本</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_t2Hc"><div class="admonitionHeading_F_6S"><span class="admonitionIcon_LHTy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_oaIG"><p>Alias<strong>仅</strong>更改使用的终端实例中的 Java 版本</p></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="使用软件sdkman更改">使用软件<strong>SDKMAN!</strong>更改<a href="#使用软件sdkman更改" class="hash-link" aria-label="使用软件sdkman更改的直接链接" title="使用软件sdkman更改的直接链接">​</a></h2><p><a href="https://sdkman.io/" target="_blank" rel="noopener noreferrer"><strong>SDKMAN!</strong></a></p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="JAVA" term="JAVA"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[macOS运行Java GUI程序提示缺少字体或提示运行失败问题解决]]></title>
        <id>https://www.ga0x.com/blog/2022/09/26/macOS-Failed-to-run-java-gui</id>
        <link href="https://www.ga0x.com/blog/2022/09/26/macOS-Failed-to-run-java-gui"/>
        <updated>2022-09-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[出现警告]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_er05" id="出现警告">出现警告<a href="#出现警告" class="hash-link" aria-label="出现警告的直接链接" title="出现警告的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">Warning: the fonts </span><span class="token string" style="color:#e3116c">"Times"</span><span class="token plain"> and </span><span class="token string" style="color:#e3116c">"Lucida Bright"</span><span class="token plain"> are not available </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the Java logical font </span><span class="token string" style="color:#e3116c">"Serif"</span><span class="token plain">, </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> may have unexpected appearance or behavior. Re-enable the </span><span class="token string" style="color:#e3116c">"Times"</span><span class="token plain"> font to remove this warning.</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="原因">原因<a href="#原因" class="hash-link" aria-label="原因的直接链接" title="原因的直接链接">​</a></h3><p>你的苹果电脑缺少Times字体</p><h3 class="anchor anchorWithStickyNavbar_er05" id="解决方案">解决方案<a href="#解决方案" class="hash-link" aria-label="解决方案的直接链接" title="解决方案的直接链接">​</a></h3><p>进入下方链接下载字体双击安装就好了
<a href="https://www.freebestfonts.com/timr45w-font" target="_blank" rel="noopener noreferrer">https://www.freebestfonts.com/timr45w-font</a></p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="JAVA" term="JAVA"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[JavaVM FATAL: Failed to load the jvm library]]></title>
        <id>https://www.ga0x.com/blog/2022/09/21/JavaVM-FATAL-Failed-to-load-the-jvm-library</id>
        <link href="https://www.ga0x.com/blog/2022/09/21/JavaVM-FATAL-Failed-to-load-the-jvm-library"/>
        <updated>2022-09-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[问题]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_er05" id="问题">问题<a href="#问题" class="hash-link" aria-label="问题的直接链接" title="问题的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">JavaVM: Failed to load JVM: /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/bundle/Libraries/libserver.dylib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JavaVM FATAL: Failed to load the jvm library.</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="解决方案">解决方案<a href="#解决方案" class="hash-link" aria-label="解决方案的直接链接" title="解决方案的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home/lib</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/jre/lib/server/libjvm.dylib libserver.dylib</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="JVM" term="JVM"/>
        <category label="JAVA" term="JAVA"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[今天很多 CTO 都是被干掉的，因为他没有成就业务]]></title>
        <id>https://www.ga0x.com/blog/2022/07/14/cto-manage</id>
        <link href="https://www.ga0x.com/blog/2022/07/14/cto-manage"/>
        <updated>2022-07-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[转自 InfoQ 很好的文章 分享出来 希望大家都可以得到收获。]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-tip alert alert--success admonition_t2Hc"><div class="admonitionHeading_F_6S"><span class="admonitionIcon_LHTy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>转发</div><div class="admonitionContent_oaIG"><p>转自 <code>InfoQ</code> 很好的文章 分享出来 希望大家都可以得到收获。</p></div></div><ul><li>后疫情时代，传统企业面临的现实世界是怎样的？</li><li>偏传统的企业做数字化转型最迫切的问题是什么？最好解决的问题是什么？最难解决的问题是什么？</li><li>数字化转型这事应该由谁来牵头，谁为结果负责？</li><li>在数字化转型的过程中，有哪些关键技术值得下力气去做？</li><li>数字化投入无法转化为业务价值，问题出在哪里？</li><li>如何评价数字化转型的 ROI ？……</li></ul><p>一问：后疫情时代，传统企业面临的现实世界是怎样的？</p><p><strong>第一，今天我们正处于乌卡时代。</strong></p><p>乌卡时代（VUCA )，是 Volatile（易变不稳定），Uncertain（不确定），Complex（复杂），Ambiguous（模糊）的缩写，这个概念最早由美军在 20 世纪 90 年代提出，用来描述冷战结束后的世界，后被引用描述变幻莫测、充满不确定性的商业环境。</p><p>今天，很多企业里面的领导层经常焦虑，为什么呢？因为当前这个时代就是乌卡时代，这是今天的企业面临的第一个真实的情况。在这个情况下，对于 Leader 最大的一个要求就是方向。所以我在公司里面经常讲一句话——没有方向感，最大的责任人就是一把手或这个高管团队。</p><p><strong>第二，中国市场的变化，从供不应求到供大于求。</strong></p><p>不管是真实的物质产品，还是虚拟产品，包括技术产品，都是从供不应求到供大于求。在过去，业务的增长可能很大来自于增量用户，但如今我们很多时候需要基于存量用户去经营。</p><p>应对第一点问题，你需要做敏捷。那么针对第二点，你需要足够优秀、足够卓越。原来做生意，有渠道就行了，比如原来我们去买股票是需要拿一个纸条子的，那个纸条子还得花钱买，再比如原来你可以把一台空调卖到几万块甚至十几万块，因为只有你有，或者只有你有渠道，但今天到处都是空调，到处都是电器，你还能简简单单卖这么贵吗？</p><p>为什么今天我们普通人比过去皇帝过得还好？都是依托于科技的进步，而随着科技越来越变成基础设施，人民的生活还会越来越好。</p><p><strong>第三，企业原来是先做大再做强，现在要先做强再做大。</strong></p><p>我觉得在过去很多时候，其实很多企业是先做大后做强，因为供不应求，都是增量用户，等你精雕细琢出来，蛋糕早被瓜分完了，所以当时做企业是不计成本、不惜代价，因为有资本的助力，你可以有恃无恐。但现在是什么？现在你一定要先做强后做大，否则死路一条，我觉得这也是创业者以及 IT 部门人员要刻在骨子里的认知。</p><p>这是我针对第一个问题给出的答案，我觉得弄清楚这个问题非常非常重要，因为人一定要知道自己所处的上下文，所处的环境，所处的时代，不要总觉得自己很牛逼，其实很多时候是因为时代牛逼。</p><p>二问：偏传统的企业做数字化转型最迫切的问题是什么？最好解决的问题是什么？最难解决的问题是什么？</p><p><strong>最迫切的问题，统一思想。</strong></p><p>也就是说，在大方向上，大家的思想是不是都是一致的。有的企业对这一点真的是有非常深刻的认知，比如平安银行。我曾经去平安银行做过交流，了解到平安银行购买了数字化转型的课程，让几万人都去学习，所有人甚至包括司机都要参加考试，这被内部戏称为平安银行的高考，我说这个太变态了。但是我觉得只有这样，这家企业里的人才能形成这个共识，因为做数字化转型最难的一个问题就是统一思想，做不到会相当麻烦。当然，要做到这一点，不同的企业有不同的节奏和路径，不一定要和他们一样。</p><p><strong>最好解决的问题，技术问题。</strong></p><p>我可以斗胆说一句，今天中国大多数商业公司没有什么特别的技术挑战，撑死了也只是你公司里自己的技术挑战，放到全北京、全中国去看，就不是什么挑战了。当然如果你把普遍的业界共有的技术挑战给解决了，那我觉得你发财了，你应该去创业，这是一个巨大的机会。所以，我认为业务的支撑技术不会是一个很大的问题，而且是我们作为 IT 部门最应该、最快跨越的问题。</p><p><strong>最难解决的问题，新建一个组织，实现业务 IT 的一体化。</strong></p><p>数字化转型最后的结果是什么？是有一个新的组织，有一帮既懂技术也懂业务的人，但这在当前的企业里面可能是不存在的，或者不是普遍存在的。那怎么办呢？企业要培养这样的人，所以这一点对应的就是要去做组织转型，让企业达到优秀卓越，去应对充分竞争的市场。最后让这个组织具有专业分工、高效协同的特征。你可以观察一下，你现在的公司是不是已经做到了这一点。</p><p><strong>要培养创始产品经理和企业架构师</strong></p><p>关于人员培养的问题，有一个很重要的事情就是要去培养产品经理。这里的产品经理不是我们一般说的这种偏执行性的产品经理，业务的翻译器，而是创始产品经理，他是懂业务的，他知道做什么对公司有价值，一旦做了就会把这个产品做好。另外，还要培养企业架构师，去做整个高阶的体系的设计。新时代需要的这两种人才，企业可能都没有。</p><p>我可以丝毫不开玩笑地说，今天很多研发都只是“工人”，如果你不像我刚才说的转换思维去成就业务，就只能停留在工人级别“计件制”的竞争，挣两三万很高了。</p><p>我在这里稍微展开讲一下我们公司。我们公司总共 4000 多人，研发团队总共就 100 人，核心的业务全部是自研的。一个小团队有 3 到 5 人，做 1 到 3 个产品，他们不断把这些产品的成熟度做高，从支持业务慢慢地转向接管业务。随着我的产品做得越来越好，请问，业务部门的人难道不应该去提升能力、去更进步吗？否则我为什么要研发去做这个产品？我们公司做了一件很明确的事情就是，随着科技能力建设的提升，做出了共享中心，然后进行裁员。你猜结果怎么样？产品做得更好了，因为我们把标准做在了产品里边，我会在后面特别展开去讲这件事情。</p><p>做数字化转型不只是个技术问题，首先你要对业务深刻理解，要高度抽象，要有架构设计，你还要推动最难的组织变革。你也知道，历史上做变革的人下场大多不好，放在今天也一样，做数字化转型真的是太难了。</p><p>我对第二个问题的回答到此为止，不一定特别适合你的企业，但是我的观点非常鲜明，我认为它是对的，并且成功实践过。</p><p>三问：数字化转型这事应该由谁来牵头，谁为结果负责？</p><p>你有没有注意到，我在前面说今天其实大多数企业是没有这种人才和团队的，那数字化转型这事儿应该由谁来牵头、谁来为结果负责？有人说，过去是 CTO 负责。过去的 CTO 就是个技术宅男，充其量就是个高阶的工人，公司的业务啥都不懂，他怎么能做得好这事呢？所以，大多数传统的 CTO、CFO 以及 CMO 等等角色无法胜任领导大家去转变思想成就业务这件事。</p><p><strong>但是我认为，这件事最终还是要让 CTO 去承担，去牵头</strong> ，道理很简单，IT 人员可以转业务，但是你让一个业务部门的人来转 IT，想要他从头去学习 Java 和 K8s，这不是很难吗？从大方向来说，现在的企业没有这样的人，所以需要能培养就培养，能招就招，但是这些人最终都得到 IT 部门去，对 IT 部门来说这个人很重要。</p><p><strong>你可能不知道，今天很多的 CTO 都是被干掉的，在公司里边很没地位的。为什么？因为他没有成就业务。</strong> 我在公司里观点就很鲜明，因为我给公司创造价值。所以我就跟 IT 团队讲，我们要干的就是把业务部门裁掉，裁不掉他们就裁我们，这是血性，这也是方向，要是你不做到这个迟早会被裁，再过三年就像一些公司一把裁掉 IT 团队 90% 的人员。其实这很正常，企业要存活，等你真正面临企业的生死存亡时刻，你就会知道这是很残酷的一句话。</p><p>那么，谁来为结果负责呢？谁强谁负责。就像在公司里边，这个需求到底什么时候做，不好意思，我说了算。如果业务部门跟我谈了一堆没啥用的需求，我可以压需求三个月不做，我觉得你作为 Leader 真的要扛起这事儿。但是回过头来讲，在有的企业里面你能这样吗？所以很多企业我是不去的，去了我肯定死得很惨。</p><p><strong>应对之策</strong></p><p><strong>第一个，一个产品，如果按照成熟度来划分，它可以被高度总结为工具、助手、专家三个等级。</strong></p><p>第一个阶段，工具，对业务部门有点帮助，对别人有点用。第二个阶段，助手，你这个人、你这个岗位百分之七八十被我的产品取代了，这叫助手。专家是什么？你，裁掉，当然这是形象化的表述，实际是指是替换掉做的事，关于相关人员，那是公司 HR 的事。</p><p>可以很明确地说，我们现在已经进入到助手和专家之间。我也可以很明确地跟大家讲，我们公司就是每个月都在裁业务部门的人，你就得进步，就得转岗学习，你做的那点事有什么系统做不了的？真的留下不能取代的是真正有价值的工作。</p><p>我们把这些角色给高度抽象了以后，你可以看看一个公司里到底有多少人是有创造力的，有的人做的不是搬数据就是搬菜。你把数据从这个部门搬到那个部门，加工一下再搬到下一个部门，这就是搬数据的，挣的工资可能是 1 万 5 到 2 万。搬菜的呢，把这个菜从工厂加工出来，然后再搬到下一个地方，一个月挣 4000 到 8000。搬数据的，IT 都可以接管，搬菜的，可以用机器人去取代，比如 AGV 搬运机器人。由此，我们可以让员工和公司一起进步，不要去做低质量的重复性工作，而是不断去做更高层级的、创新的、有创造力的工作。</p><p><strong>第二个，你要建设一个系统驱动的体系</strong> ，因为你整个公司的业务是被系统去接管和驱动的，而不是一个 Excel 系统。我打个比方，如果你做的东西只停留在工具级别，只做了个 Excel 系统，只做了个记录，那有什么用？事实上，很多公司就是如此，我们公司之前也是。</p><p><strong>第三个，一定要做组织变革。</strong> 但其实面对这一点，大多数的公司会完蛋。全是利益，怎么做组织变革？因此，从这一点去看，你永远不要害怕大公司。大公司能做组织变革吗？不是他姨姨，就是他姑姑，全是关系，如何做到专业分工、高效协同？但是你不做这个又能怎么办呢？乌卡时代，存量竞争需要卓越优秀。 <strong>所以我觉得，创业公司永远要充满信心地去干掉大公司，大公司的效率就是低</strong> 。其实我对创业公司都充满希望，也愿意拿这个认知去投资那些我看好的创业公司，我觉得认知可以给你带来很多的好处和回报。</p><p>所以你其实要打造的是数据、用户体验驱动内部经营完善的体系。什么叫驱动内部经营完善？做得不好的要批评他、要通报他、要把他裁掉，做得那么垃圾的为什么不裁掉，是吧？不做这些事情，你的 IT 的产品能好吗？在这一点上，我们公司就推进得特别好，公司高管层意见一致。我在我们公司坚决地推进这点，推进不下去，我滚蛋，因为推进不下去是不可能成功的，我为什么要在这里浪费时间。</p><p>四问：在数字化转型的过程中，有哪些关键技术值得下力气去做？</p><p>我在前面讲到，技术不是挑战，不是问题，但是技术很重要，你在公司里面就是吃技术的红利的，要用你的技术去发挥价值。</p><p>这里插个题外话，我一直认为，科技向善，科技不与人争利，人跟人才争利。公司不会因为用了哪个系统效率变高了裁你，是因为你那些低质量的重复性工作被系统取代后，你还不思进取，不去做有创造性的新工作，老板觉得你没用了，他才会裁你。</p><p>但是最后想一想，这些科技是不是会变成社会基础设施？过去只有少数人、少数组织能享受的，后面慢慢都会变成社会基础设施。当你带着这种认知历史的时候，会发现几千年来大多如此。农业社会，犁的发明让耕种的效率一下子提升一大截，这绝对是一个伟大的发明。那今天是信息社会，作为技术人，你就要吃这个红利，对吧？我之前说，技术不是挑战，但不代表不重视技术。既然技术不是挑战，那你就得把它发挥到极致。</p><p>怎么发挥到极致？很多人一讲技术，一下子就跳到什么云计算、大数据、AI，我觉得那都是扯淡，那都不是在企业里当将军的。</p><p><strong>企业里真正的“将军”应该去做什么？</strong></p><p><strong>第一，顶层设计，系统驱动。</strong></p><p>从整个大的角度，你就把公司当成一个大产品，里边有几十个系统，公司所有的业务都被系统接管，系统之间还有交互，我给它高度抽象为交易体系、协同体系、监控体系、绩效体系。每个产品自己去干活，干不了的时候交给人，人干完了再交回来。这样一来，系统知道人到底在干什么、干得怎么样、人干的事我能干吗，产品经理就要去关注系统驱动。今天有多少公司是这样的？少之又少。我们公司之前不是这样，但我们已经建设成这样，最后你会发现这是一个非常非常大的变化。</p><p>所以，我认为首先就要做好顶层设计，企业架构师把业务高度抽象，创始产品经理才能把系统驱动的一整套体系设计出来。至于哪些自建，哪些购买，就是再往下一层的事情。</p><p>这里我顺带讲一下，企业需要画一条线，线上的自建，线下的购买。哪些自建？让你具备核心竞争力的要自建，毕竟这种让你绝对牛逼、超越竞争对手几十号排位的产品，怎么可能会有厂商卖给你？而有的东西就没必要自建了，能买就买，所以越是偏技术性的越不要做。很多技术团队在公司里面去忽悠人，我们公司里面这样忽悠我的，都被我干掉了，然后我自己下场干。人家外面有做得好的产品不拿过来，非要自己下场干是吧？你这么牛逼怎么不像毕玄一样去创业？</p><p>你也可以选择自建，比如一个商业产品要价 20 万，而你可以很快自建出来满足公司需要，并且只用花 10 万的研发成本。不过，现在 IT 的人力成本已经这么贵了，10 万的成本你能投入几个人？按照 2 万一个人来算，10 万也只能让 5 个人做一个月，如果要做两个月，那么就是 2.5 个人，这点人能做出什么像样的产品？</p><p>所以为什么过去中国的 B 端做得不好？我觉得 B 端创业最大的竞争者不是竞争对手，是甲方的 CTO 和对应的团队，就是像我这样的 CTO。</p><p>不管你想做成什么事，你都要找到最优解，首先就要掌控设计。</p><p><strong>第二，技术上一定要关注模块化。</strong> 既然要专业分工，那么模块化就要做好。很多人在这一步就直接从一个大单体应用跳到微服务了。微服务是最终的结果，但我们能不能慢慢地过去？别一上来就依赖倒置、接口分离，很多技术团队根本没那么高的水平。你只要把模块化做好，也就是说，这个模块里的数据只有这个模块可以访问，其他人访问是不被允许的，至少能把这个守住，你的架构就不会烂到家。</p><p><strong>第三，要关注用户体验，一定要有监控体系。</strong> 你的系统里边到底怎么样，服务响应时间怎么样，用户访问你，他有没有业务异常，有没有系统异常？如果你连用户发生了什么都不关注，你怎么可能做好？所以你要有监控体系，也要做好治理工作。我们公司的目标，今年 6 月 30 号以后，生产环境不允许有一个异常，每天都要清理掉，不管任何服务，响应时间都不允许大于 2 秒，有定义 SLA（Service Level Agreement） 的再说，如果确实有长于这个时长的，那也是被特批过的。所以我觉得一定要有监控体系，否则生产环境已经烂得一塌糊涂了， IT 根本不管，还在那里吹牛，在整天做项目。</p><p><strong>第四，要产生价值，一定要有目标管理。</strong> 关于目标管理，第一个要谈的就是 OKR ，要有方向感。然后你的团队还要有周目标、日目标，抓执行力，最后要抓人效数据。我们常常讲，团队要提高研发效能，但有没有管理说过人效的问题？有人说，这是不是就是卷？你可以认为这是卷，那你说西点军校卷不卷，企业就是要去竞争的，你要和企业一起去成功。另外，我觉得人尽量不要招多了，尽量少招人，3 到 5 人就是一个创业团队，具体的原因我会在后面讲到，分析一下大家跟公司共存亡这个问题。很多员工其实自己在单位里上班也浑浑噩噩的，对自己来说没有意义，对单位来说也吃亏，其实我觉得这都是管理层出了问题。</p><p><strong>第五，数据驱动经营完善，一定要看数据。</strong> 在今天，一个企业经营不看数据不就是扯淡吗？尤其是管理干部和领导，一定要意识到数据特别重要，要用数据驱动内部进行完善。比如 OKR 里面都是数据，而且数据都是系统统计出来的，做到多少就是多少，全公司人都能看见。目标和目标对应的数据管理特别重要。</p><p><strong>第六，只用一只眼睛盯着 AI。</strong> 当前的 AI 大多数时候没什么用，因为它还不是真正的人工智能，是傻人工智能。在这个情况下要发挥 AI 的价值，需要有几个依赖。第一，你的数据得够多。第二，数据得够准确。你们公司有数据吗？连数据都没有还谈什么 AI？你说有数据，主数据管理都没做好，最基础的数据都是垃圾数据，怎么可能做好人工智能？第三，上层的大数据做好了吗？大数据没做好，AI 怎么可能做好？所以 AI 到公司里面之后全是坑，最后你也被坑。但是客观来讲，AI 是不是就没用？还真不是。我去年就在盯 AI 的东西，我们在做销售的智能报价，大概在今年 9 月份左右，我们公司的报价应该会全面地被系统完全接管，这里其实就利用了很多产品的能力，再加上 AI 的辅助。</p><p><strong>第七，三大效率。</strong></p><p>这里我会特别展开讲一下。你说这跟技术有关系吗？每一个都特别有。技术是为什么服务的？技术是为发展业务服务的。</p><ol><li>研发效率</li></ol><p>像 CI/CD、云计算、分布式服务、DB 缓存等等，有关基础平台和组件都要持续建设完善，你投入两到三个人干这个活儿，就可以让一百多个人效率更高，何乐而不为呢？我们做这个事情的目的就是让开发人员只写代码，测试人员只写测试案例，我们在各个层面都持续观察、分析研发人员到底在忙什么，然后帮助他提升效率。</p><p>另外一个与研发效率相关的是要搭建一个 SOA（Service Oriented Architecture） 和 EDA（ Event Driven Architecture ） 的架构。打个比方，我前面提到的交易体系，它是比较稳定的，适合用 SOA 架构。那协同体系呢？我们今天需要应对各种各样的变化，所以搭建的时候就需要用事件驱动的架构，也就是 EDA 架构。当你把有很多变化的东西放在 EDA 架构上之后，你的研发效率会飞快提升。</p><p>此外，针对 CI/CD 而言，产品经理要跟开发有共同的语言，开发跟测试的工作要解耦，开发发布到生产环境是不依赖于测试的，这其实是需要有一整套的体系和支持的能力，比如说要有特性开关。你要想尽一切办法让大家都尽量不依赖地、快速地把自己的工作做完，最大化地降低研发的半成品。什么叫半成品？没有投入到生产环境的就是半成品，这是我们特别考核的一个指标。如果哪家公司不在这上面投入，那我觉得他们太傻了。要么投入两三个人去做，要么去买，这件事绝对值得。</p><ol start="2"><li>会议效率</li></ol><p>大家很容易忽略会议效率，但我认为我们需要永无止境地关注会议效率。我有一句话叫“两年之内，每周必须谈会议效率哪里要提升”，其实公司里大量的时间都是浪费在会议上。当然，大量的有用的价值也都产生在会议中，但是你一定要持续地去优化它，比如你要引入一些会议的工具，你要去观测，你要去教大家如何开会。</p><ol start="3"><li>决策效率</li></ol><p>决策效率也特别重要，不要议而不决。我对团队说过一句话，中层干部要独挡一面，不敢做决定的都要被干掉，不许拿 A/B 方案来跟我来汇报，不好意思，A 还是 B，你必须选一个。</p><p>研发效率、会议效率、决策效率这三大效率要无限关注，这些东西在基础工具平台上都有巨大的机会，值得去创业，如果全国中能有一家公司把它吃透了，那这家公司会特别牛逼。但是在今天，这个领域还没有特别优秀的工具和产品。</p><p>五问：数字化投入无法转化为业务价值，问题出在哪里？</p><p>社区里有同学问到，数字化和数字化转型是两码事，数字化投入无法转化为业务价值，问题出在哪里，并且感叹，根深蒂固的传统思维难以扭转，做数字化转型仿佛带着镣铐前行。</p><p>肯定是啊，因为你的公司就没有能搞定这些事情的人，业务部门没有，IT 部门也没有。</p><p><strong>别带着工人心态去抱怨</strong></p><p>我给大家讲一个真实的事情。</p><p>我们下面一个开发跟我抱怨说，Alex，业务给我们提的需求，今天说这样做，过了两天又那样做，过了几天又变了，来回反复。我问他，你有没有观点，有没有意见，你既没观点又没意见，你做不就行了吗？公司又不是没给你发工资。</p><p>产品经理能力不足，业务部门对事情认知不到位，这是你不得不经历的。但是，所有的人都不要去抱怨，都要去思考这个事情我们是不是做对了，别一方面是个工人心态，一方面又抱怨这、抱怨那。</p><p>所以我们的 3 到 5 人团队，每一个团队都要懂业务，我们打造的绝对是全公司最懂业务的技术团队，甚至任何一个业务部门都没我们懂。我就是直接下到工厂里去看业务到底怎么做，你必须到场景当中去了解业务。</p><p><strong>很多公司做数字化转型注定是失败</strong></p><p>所以要回答为何数字化投入无法转化为业务价值这个问题，我的观点如下。</p><p><strong>我的第一个观点——数字化转型，其实本质上你可以认为是一种创业，而且是更难的创业，有包袱的。</strong></p><p>看到这里，你可能会说，公司里有资源啊！根据我的经验，<strong>我的第二个观点诞生了——公司里所有的资源、过去的经验在这个层面都是诅咒。</strong> 你以为大就是强，有资源就是强，实际上，大和强是两回事。创业公司的团队的活力和激情在哪里，你一个传统公司，背着这么强的包袱，你的活力和激情又在哪里？所以资源是诅咒，它并不能助力你去做强。</p><p><strong>我的第三个观点，缺乏能做顶层设计的人才。</strong> 乌卡时代具有不确定性，但你又要设计一个大的体系，去识别公司里有确定性的东西和不确定性的东西，用 SOA 架构和 EDA 架构以及模块化把顶层设计做好，但是你的公司里面有没有这样的人？你们的 CTO 和高层有没有把这个事情规划好让大家一起去做、一块块落地？你说，不对，我们还是需求驱动的，那还谈什么？本来过去就是需求驱动的，你想一下把所有的需求都做了，能让企业上一个大台阶吗？很多公司从来没有失败的项目，都是成功的项目，可一年下来有什么用呢？确定的是成本，不确定的是收益。</p><p><strong>我的第四个观点，组织变革难如登天。</strong> 我在前面说，从古至今，变革都没什么好下场。今年，我们公司一月份的战略会议，我就提到过这个，我说，变革者没有好下场，你看，商鞅变法被五马分尸，王安石变法被贬，唯一一个好的例子是邓公，但这样的例子少之又少。所以在公司里面，统一思想认知很重要。</p><p><strong>第五点，文化和方向，能不能容错、试错。</strong> 做这么难的事情，犯点错就干掉了，谁还给你干活儿？以后没人干了，这个公司就等死了。</p><p>以上就是我的五个观点，你一条一条去仔细看，每一条都很难。所以很多公司做数字化转型注定是失败，所以我一定不会去这些公司，因为我分析过它没法成功。技术人在这样的公司里面，踏踏实实实现一个功能，按时保质保量的交付一个有用没用的东西就行了。很多公司太多这样的事情，你可能也有深有体会。</p><p>我认为传统企业的新业务，一定要去新公司培养，尤其是一定要脱离原来公司的 HR 管理制度。组织管理和 HR 简直就是刻在公司骨子里的，很难改变。做数字化转型一方面要引入技术，一方面要做组织转型，而组织转型跟 HR 的管理制度是很有关系的，我自己对此真的是有深刻体会，这里就不展开讲了。</p><p>很多人发展很顺利，他不会有我这种深刻的理解。为什么我有？因为我经历过、痛苦过，我刚才讲的都是我的亲身体会过的。很多痛苦的东西让你成长、反思、复盘，然后就会变成刻在你自己身上的很深层次的东西。</p><p>六问：如何评估数字化转型的 ROI ？</p><p>如果大家关注我的观点，就会发现我很早就讲过一定要去算财务账。包括其实我去找公司，我跟老板谈薪水都会谈到这一点，我给你创造什么价值，你就给我多少，我创造不了，你就叫我滚蛋，就这么简单，因为这个世界的本质是价值交换。</p><p><strong>数字化转型 ROI 的三个计算方式</strong></p><p>回到如何评估数字化转型的 ROI 上来，我认为这是分层级、分阶段的。</p><p><strong>第一个阶段，你的项目成功上线。</strong></p><p><strong>第二个阶段，着眼产品，两个 100%。</strong></p><p>产品的使用率要 100%。如果你建设的产品，用户都不用，那成本不是白花了？我们公司科技中心建设的所有产品的要求必须 100% 使用，如果不使用，他要告诉我哪里需要完善，如果说没有要完善的点了，请用起来。</p><p>满意度要 100%。那些内部员工使用的产品，他们满意吗？我们公司建设了反馈系统，任何产品上线后，都要去问使用的员工是不是满意，不满意要告诉我哪儿不满意，我给你解决了。不要老去按时保质保量地完成一个没用的东西，多少企业在做这样的事情？在我们这里，绝对不允许这种事情发生。</p><p><strong>第三个阶段，财务，算投资回报率。</strong></p><p>这个时候，你要开始算钱了，把这个 3 到 5 人的团队像一个创业公司一样，计算所有的成本，包括人员成本、服务器成本，盘算他们创造的收入，增加的成本分别是多少，是不是做到了公司成本降低，利润增加，费用下降，人效提升。</p><p>对我们现在的团队来说，要考核的就是每个周期又建设了多少个虚拟员工。就如我之前所讲，你建设的产品，按照工具、助手、专家这三个等级来划分，你最后把多少个专家角色取代了？你建设了多少个生管（生产管理员）？多少个物流的发运主管？多少个接单员？多少个财务人员？通过这种方式，通过专业分工、高效协同，让这个企业里的每个人只面对他该面对的产品，不用和其他人或其他产品打交道。</p><p>虚拟员工就是收入，收入减掉成本就是利润，利润除以成本就是投资回报率，这就是我们最后关注的东西。</p><p>很早以前，我们就已经在考核使用率和满意度了，现在正从第二阶段迈入第三阶段，也就是给每个小团队算财务账的阶段，<strong>一句话总结就是拿着工资去创业。</strong></p><p><strong>最后提一点，一定要做好激励体系。</strong> 我们有一个激励可视化的绩效分层体系，这种体系可以让企业里的每个员工充满活力和激情，跟公司一起去创业，我觉得能做好这种体系的组织绝对是很牛逼的。我自己有时候就想，等我和这团队把彩食鲜这个公司做上市了，这团队跟着我做别的事绝对是杠杠的，因为都是筛选出来的可独挡一面的人才。我跟他们讲，我觉得你们就应该奔着这一把做完就财务自由的目标去。我也跟我下面所有汇报给我的人讲，你一定要把激励体系做好，你要让他相信跟着你是可以实现这个目标的。</p><p>所以，“赢”是凝聚团队最好的办法。你算清楚财务账，让每个小团队都像是在拿着工资去创业，那这个科技团队就会很牛逼。</p><p>思考：每个企业都要有自我革命和归零的勇气</p><p>我回过头来把上面六个问题压在一起去想，要解决数字化转型遇到的挑战和痛点，真的是很难。我自己对这个事情的思考有两点。</p><p>第一点，我对很多传统企业的数字化转型是持悲观态度的。第二，如果有这种决心，那就要统一思想，并且要培养容错试错的文化，这一点很重要。然而很多公司的老大过去太成功了，他不能容忍犯错的，他觉得下面的人怎么能犯点小错呢？可是如果把下面的人骂得跟孙子一样，他怎么可能有创造力？怎么成功？这根本不是技术问题。同时这个企业又要有顶层设计，所以对一个组织的要求是非常高的。</p><p>所以大家可以结合自己所在企业的情况去看，看自己的位置、自己能干什么。</p><p>数字化转型是滚滚长江水，谁都挡不住。老的企业总会死的，新一代的企业会出来。企业如人，有的企业已经是老人，老态龙钟，有的企业是壮年，有的企业决心返老还童，但是真正做到了返老还童的企业少之又少。再过 20 年，很多企业里面的很多业务都是有数字化思维的人在主导，因为效率高。如果用自然法则、生老病死去看一个企业，会看得很透，对于一些达到比较高职位的人来说，你再去选企业的时候就知道如何选择了，你要选赛道、选创始人，尤其是你带着一身抱负想要施展的，尤其要看你去了之后这个企业能不能改变，做好这个判断。</p><p>每个企业成功，都是因为遇到了自己的时代，有的时候就是命好，不一定是他真的能力有多强。但是要在这个时代做强者，还能在下一个时代也做强者，就需要有自我革命的勇气，要不断地反思和复盘，不断地学习，要有让自己归零的勇气。你不要总觉得自己是老大，要持续学习，否则最终只有死路一条。</p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="管理" term="管理"/>
        <category label="转发" term="转发"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[在 Docusaurus 中添加评论系统]]></title>
        <id>https://www.ga0x.com/blog/2022/07/12/add-comments-to-docusaurus</id>
        <link href="https://www.ga0x.com/blog/2022/07/12/add-comments-to-docusaurus"/>
        <updated>2022-07-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[个人网站迁移到后 Docusaurus 后我发现官网是没有对评论做支持的，所以果断上github issues里查了一下 果然有人问，发现大概是通过swizzling自定义主题增强实现的，所以我查阅了一些API下面我把实现方式发出来 其实并不难。]]></summary>
        <content type="html"><![CDATA[<p>个人网站迁移到后 Docusaurus 后我发现官网是没有对评论做支持的，所以果断上github issues里查了一下 果然有人问，发现大概是通过swizzling自定义主题增强实现的，所以我查阅了一些API下面我把实现方式发出来 其实并不难。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="常用的评论系统">常用的评论系统<a href="#常用的评论系统" class="hash-link" aria-label="常用的评论系统的直接链接" title="常用的评论系统的直接链接">​</a></h2><ol><li><a href="https://giscus.app/" target="_blank" rel="noopener noreferrer">giscus</a> - 通过Github的Discussions功能实现</li><li><a href="https://utteranc.es/" target="_blank" rel="noopener noreferrer">utterances</a> - 通过Github的Issues功能实现</li><li><a href="https://disqus.com/" target="_blank" rel="noopener noreferrer">Disqus</a> - 独立实现、类似搜狐畅言和多说这种</li></ol><h2 class="anchor anchorWithStickyNavbar_er05" id="先决条件">先决条件<a href="#先决条件" class="hash-link" aria-label="先决条件的直接链接" title="先决条件的直接链接">​</a></h2><ol><li>你的项目运行 Docusaurus，至少有一篇博文或文档</li><li>你安装的主题是theme classic，也是默认的。</li><li>根据对应的评论插件注册一下拿到配置</li></ol><p>本文以 <code>giscus</code> 为例借鉴参考，对接其他评论插件也是大同小异</p><h2 class="anchor anchorWithStickyNavbar_er05" id="配置-giscus">配置 giscus<a href="#配置-giscus" class="hash-link" aria-label="配置 giscus的直接链接" title="配置 giscus的直接链接">​</a></h2><p>先登录你的github账号安装 giscus 应用 <a href="https://github.com/apps/giscus" target="_blank" rel="noopener noreferrer">giscus app</a></p><p>进到<a href="https://giscus.app/" target="_blank" rel="noopener noreferrer">giscus</a>的官网配置好语言、评论要发到的github仓库、页面与映射关系， 选择一个discussion分类、主题等。 拿到配置好的 <code>&lt;script&gt;</code> 标签。</p><p>类似：</p><div class="language-javascript codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-javascript codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">script src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"https://giscus.app/client.js"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">repo</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"xxxxx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">repo</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"xxxx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">category</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"xxxx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">category</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"xxxxx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">mapping</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"pathname"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">reactions</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">enabled</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">emit</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">input</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">position</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"bottom"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">theme</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"light"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">lang</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"zh-CN"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        crossorigin</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"anonymous"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        async</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">script</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在你的 Docusaurus 项目根目录执行</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> swizzle @docusaurus/theme-classic BlogPostPage</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>选择 <code>Eject (Unsafe)</code> 回车</p><p>选择 <code>YES: I know what I am doing!</code> 回车</p><p>这时你的项目目录下<code>src/theme/BlogPostPage</code>生成了自定义主题的文件</p><p>下一步修改文件</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_t2Hc"><div class="admonitionHeading_F_6S"><span class="admonitionIcon_LHTy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_oaIG"><p>下面<code>三处标注</code>是我们要修改添加代码的地方。 注意版本不同配置可能存在差异 根据标注自己找放评论的位置。</p></div></div><div class="language-jsx codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_U9IX">src/theme/BlogPostPage/index.js</div><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-jsx codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useRef </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">clsx</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'clsx'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports maybe-class-name">HtmlClassNameProvider</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ThemeClassNames</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@docusaurus/theme-common'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports maybe-class-name">BlogPostProvider</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useBlogPost</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@docusaurus/theme-common/internal'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BlogLayout</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/BlogLayout'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BlogPostItem</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/BlogPostItem'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BlogPostPaginator</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/BlogPostPaginator'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BlogPostPageMetadata</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/BlogPostPage/Metadata'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TOC</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/TOC'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">BlogPostPageContent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter">sidebar</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> children</span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> toc</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useBlogPost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nextItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prevItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> frontMatter</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">hide_table_of_contents</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hideTableOfContents</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">toc_min_heading_level</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> tocMinHeadingLevel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">toc_max_heading_level</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> tocMaxHeadingLevel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> frontMatter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> commentElement </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Update the document title using the browser API</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> s </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"script"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">src</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://giscus.app/client.js"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-repo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[你的仓库]"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-repo-id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[你的仓库 ID]="</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-category"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[你的分类名]"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-category-id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[你的分类 ID]"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-mapping"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"pathname"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-reactions-enabled"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-emit-metadata"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-input-position"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bottom"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-theme"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"light"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data-lang"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zh-CN"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"crossorigin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"anonymous"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">async</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    commentElement</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogLayout</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">sidebar</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">sidebar</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">toc</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript operator" style="color:#393A34">!</span><span class="token tag script language-javascript" style="color:#00009f">hideTableOfContents </span><span class="token tag script language-javascript operator" style="color:#393A34">&amp;&amp;</span><span class="token tag script language-javascript" style="color:#00009f"> toc</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">length</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">0</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">?</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">          </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">TOC</span><span class="token tag script language-javascript tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript tag" style="color:#00009f">            </span><span class="token tag script language-javascript tag attr-name" style="color:#00a4db">toc</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#00009f">toc</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript tag" style="color:#00009f">            </span><span class="token tag script language-javascript tag attr-name" style="color:#00a4db">minHeadingLevel</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#00009f">tocMinHeadingLevel</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript tag" style="color:#00009f">            </span><span class="token tag script language-javascript tag attr-name" style="color:#00a4db">maxHeadingLevel</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#00009f">tocMaxHeadingLevel</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript tag" style="color:#00009f">          </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript keyword nil" style="color:#00009f">undefined</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogPostItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">BlogPostItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextItem </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> prevItem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogPostPaginator</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">nextItem</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">nextItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">prevItem</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">prevItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">marginTop</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript string" style="color:#e3116c">'20px'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">commentElement</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">BlogLayout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">BlogPostPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">BlogPostContent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">content</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogPostProvider</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">props</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">content</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">isBlogPostPage</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">HtmlClassNameProvider</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript function" style="color:#d73a49">clsx</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">          </span><span class="token tag script language-javascript maybe-class-name" style="color:#00009f">ThemeClassNames</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">wrapper</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">blogPages</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">          </span><span class="token tag script language-javascript maybe-class-name" style="color:#00009f">ThemeClassNames</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">page</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">blogPostPage</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogPostPageMetadata</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogPostPageContent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">sidebar</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">props</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">sidebar</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">BlogPostContent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">BlogPostPageContent</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">HtmlClassNameProvider</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">BlogPostProvider</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>至此评论添加完成</p><h2 class="anchor anchorWithStickyNavbar_er05" id="其他">其他<a href="#其他" class="hash-link" aria-label="其他的直接链接" title="其他的直接链接">​</a></h2><p>如果需要修改样式或者想使用其他组件直接去官方找文档对应配置就可以。 </p><p>如果想用<code>Disqus</code>的话可以直接安装npm包引用到对应的界面就可以</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> disqus-react</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> disqus-react</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Disqus配置+评论隐藏和展示控制</p><div class="language-markdown codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-markdown codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token front-matter-block punctuation" style="color:#393A34">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">slug</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> your</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">-</span><span class="token front-matter-block front-matter yaml language-yaml">blog</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">-</span><span class="token front-matter-block front-matter yaml language-yaml">post</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">-</span><span class="token front-matter-block front-matter yaml language-yaml">slug</span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">...</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">draft</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#36acaa">true</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">no_comments</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#36acaa">false</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml comment" style="color:#999988;font-style:italic"># for Disqus</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:#393A34">---</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-jsx codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">DiscussionEmbed</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'disqus-react'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">BlogPostPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> slug</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prevItem </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">hide_table_of_contents</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hideTableOfContents</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> no_comments </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> frontMatter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// after Edit this Page block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">no_comments </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">DiscussionEmbed</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">shortname</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">your_website_disqus_shortname</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">config</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">url</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> slug</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">identifier</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> slug</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">title</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> title</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">language</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'en_US'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// before nextItem</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="参考">参考<a href="#参考" class="hash-link" aria-label="参考的直接链接" title="参考的直接链接">​</a></h2><ul><li><a href="https://github.com/facebook/docusaurus/discussions/5468" target="_blank" rel="noopener noreferrer">Report your customization use-cases</a></li><li><a href="https://stackoverflow.com/questions/57564623/is-it-possible-to-support-visitor-comments-in-docusaurus" target="_blank" rel="noopener noreferrer">Is it possible to support visitor comments in Docusaurus?</a></li><li><a href="https://docusaurus.io/ko/feature-requests/p/comments-in-documents-or-blogs" target="_blank" rel="noopener noreferrer">Comments in documents or blogs</a></li><li><a href="https://giscus.app/" target="_blank" rel="noopener noreferrer">giscus document</a></li></ul>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="Docusaurus" term="Docusaurus"/>
        <category label="Disqus" term="Disqus"/>
        <category label="giscus" term="giscus"/>
        <category label="utterances" term="utterances"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[ncdu 磁盘分析查看工具使用]]></title>
        <id>https://www.ga0x.com/blog/2022/06/28/ncdu-tools</id>
        <link href="https://www.ga0x.com/blog/2022/06/28/ncdu-tools"/>
        <updated>2022-06-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[简介]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_er05" id="简介">简介<a href="#简介" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2><p><img loading="lazy" alt="help.png" src="/assets/images/help-6b68b7d3ae1a5945b70901c959f12015.png" width="2948" height="1736" class="img_Ne1E">
Ncdu 是一个带有 ncurses 接口的磁盘使用分析器。 它旨在在您没有可用的完整图形设置的远程服务器上查找空间占用者，但即使在常规桌面系统上它也是一个有用的工具。 Ncdu 的目标是快速、简单和易于使用，并且应该能够在安装了 ncurses 的任何最小的类似 POSIX 的环境中运行。</p><p>替代<code>du -h</code>等工具</p><h2 class="anchor anchorWithStickyNavbar_er05" id="安装">安装<a href="#安装" class="hash-link" aria-label="安装的直接链接" title="安装的直接链接">​</a></h2><div class="tabs-container tabList_PUic"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TlgZ tabs__item--active">macOS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TlgZ">ubuntu</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TlgZ">Centos</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_oaqp"><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ncdu</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_oaqp" hidden=""><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ncdu</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_oaqp" hidden=""><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">yum -y </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ncdu</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="使用">使用<a href="#使用" class="hash-link" aria-label="使用的直接链接" title="使用的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_er05" id="查看当前目录磁盘使用直接">查看当前目录磁盘使用，直接：<a href="#查看当前目录磁盘使用直接" class="hash-link" aria-label="查看当前目录磁盘使用，直接：的直接链接" title="查看当前目录磁盘使用，直接：的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">ncdu</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="查看指定目录">查看指定目录<a href="#查看指定目录" class="hash-link" aria-label="查看指定目录的直接链接" title="查看指定目录的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">ncdu /  </span><span class="token comment" style="color:#999988;font-style:italic">#根目录，全盘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ncdu /home</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="快捷键">快捷键<a href="#快捷键" class="hash-link" aria-label="快捷键的直接链接" title="快捷键的直接链接">​</a></h2><p>up, k 上移光标 <br>
down, j 向下移动光标 <br>
right/enter 打开选中目录 <br>
left, &lt;, h 打开父目录 <br>
n 按名称排序（升序/降序） <br>
s 按大小排序（升序/降序） <br>
C 按项目排序（升序/降序） <br>
M 按 mtime 排序（-e 标志） <br>
d 删除选中的文件或目录 <br>
t 排序时切换文件前的目录 <br>
g 显示百分比和/或图表 <br>
u 显示/隐藏硬链接共享大小 <br>
a 外观大小和磁盘使用率之间的切换 <br>
c 切换显示子项计数 <br>
e 显示/隐藏隐藏或排除的文件 <br>
i 显示所选项目的信息 <br>
r 重新计算当前目录 <br>
b 在当前目录中生成 shell <br>
q 退出ncdu <br></p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="Disk" term="Disk"/>
        <category label="Linux" term="Linux"/>
        <category label="ncdu" term="ncdu"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Redis lettuce驱动连接出现 NOAUTH Authentication required.]]></title>
        <id>https://www.ga0x.com/blog/2021/11/23/lettuce-error-noauth</id>
        <link href="https://www.ga0x.com/blog/2021/11/23/lettuce-error-noauth"/>
        <updated>2021-11-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[问题]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_er05" id="问题">问题<a href="#问题" class="hash-link" aria-label="问题的直接链接" title="问题的直接链接">​</a></h2><p>命令行连接明明没有问题，Spring Boot 的YML配置也是对的 但是死活出现密码不对。</p><p>报错日志</p><div class="language-log codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-log codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">2021-11-23 15:04:02.492  WARN 12681 --- [oundedElastic-1] o.s.b.a.r.RedisReactiveHealthIndicator   : Redis health check failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is org.springframework.data.redis.connection.PoolException: Could not get a resource from the pool; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to 172.18.150.9:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:1117)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:509)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:103)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:86)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:227)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.lang.Thread.run(Thread.java:829)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caused by: org.springframework.data.redis.connection.PoolException: Could not get a resource from the pool; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to 172.18.150.9:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.getConnection(LettucePoolingConnectionProvider.java:109)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... 15 common frames omitted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to 172.18.150.9:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.RedisClient.connect(RedisClient.java:216)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at java.base/java.util.Optional.orElseGet(Optional.java:369)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.lambda$null$0(LettucePoolingConnectionProvider.java:97)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.support.ConnectionPoolSupport$RedisPooledObjectFactory.create(ConnectionPoolSupport.java:211)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.support.ConnectionPoolSupport$RedisPooledObjectFactory.create(ConnectionPoolSupport.java:201)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.apache.commons.pool2.BasePooledObjectFactory.makeObject(BasePooledObjectFactory.java:70)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:571)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:298)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:223)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.support.ConnectionPoolSupport$1.borrowObject(ConnectionPoolSupport.java:122)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.support.ConnectionPoolSupport$1.borrowObject(ConnectionPoolSupport.java:117)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.getConnection(LettucePoolingConnectionProvider.java:103)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... 16 common frames omitted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:137)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:110)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:746)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:681)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:598)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... 1 common frames omitted</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="具体原因">具体原因<a href="#具体原因" class="hash-link" aria-label="具体原因的直接链接" title="具体原因的直接链接">​</a></h2><p>问题出在客户端上，某些云厂商魔改的redis导致协议跟官方有出入。所以导致lettuce在判断协议时 并不准确。</p><p>想了解更多的请参考我提的issues<a href="https://github.com/lettuce-io/lettuce-core/issues/1543" target="_blank" rel="noopener noreferrer">1543</a></p><h2 class="anchor anchorWithStickyNavbar_er05" id="如何解决">如何解决<a href="#如何解决" class="hash-link" aria-label="如何解决的直接链接" title="如何解决的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_er05" id="方式一">方式一<a href="#方式一" class="hash-link" aria-label="方式一的直接链接" title="方式一的直接链接">​</a></h3><p>降级lettuce客户端到5.3.x，因为自动识别RESP2/RESP3协议是6.x版本加上去的</p><div class="language-gradle codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_U9IX">build.gradle</div><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-gradle codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">implementation 'io.lettuce:lettuce-core:5.3.7.RELEASE'</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="方式二">方式二<a href="#方式二" class="hash-link" aria-label="方式二的直接链接" title="方式二的直接链接">​</a></h3><div class="language-java codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-java codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WebConfig</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">WebMvcConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * fix</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * https://github.com/lettuce-io/lettuce-core/issues/1201</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * https://github.com/lettuce-io/lettuce-core/issues/1543</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">LettuceClientConfigurationBuilderCustomizer</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">redisBuilderCustomizer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> builder </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clientOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">ClientOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">protocolVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProtocolVersion</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">RESP2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="Spring Boot" term="Spring Boot"/>
        <category label="lettuce" term="lettuce"/>
        <category label="Java" term="Java"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[graalvm 在 macOS Catalina 上提示无法验证开发人员警告问题]]></title>
        <id>https://www.ga0x.com/blog/2021/11/03/graalvm-damaged-error</id>
        <link href="https://www.ga0x.com/blog/2021/11/03/graalvm-damaged-error"/>
        <updated>2021-11-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[img.png]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" alt="img.png" src="/assets/images/img-5619a4dc6afa0937df25f4b4a3854300.png" width="260" height="234" class="img_Ne1E"></p><h2 class="anchor anchorWithStickyNavbar_er05" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h2><p>提示:</p><blockquote><p>“graalvm-ce-java11-20.3.0” is damaged and can’t be opened.</p><p>或</p><p>“graalvm-ce-java11-21.3.0”已损坏，无法打开。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_er05" id="如何解决">如何解决<a href="#如何解决" class="hash-link" aria-label="如何解决的直接链接" title="如何解决的直接链接">​</a></h2><p>在 macOS Catalina 上，您可能会收到“无法验证开发人员”的警告。这是因为 GraalVM 尚未签名和认证。但是，可以在“安全和隐私”首选项窗格中或通过运行以下命令来禁用该检查：</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">xattr -r -d com.apple.quarantine /Library/Java/JavaVirtualMachines/graalvm-ce-javaV-XX.Y.Z</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/graalvm/homebrew-tap#macos-catalina-specifics" target="_blank" rel="noopener noreferrer">官方解释和说明</a></p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="macOS" term="macOS"/>
        <category label="GraalVM" term="GraalVM"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[JetBrains全系列软件激活教程]]></title>
        <id>https://www.ga0x.com/blog/2021/11/01/jetbrains-crack</id>
        <link href="https://www.ga0x.com/blog/2021/11/01/jetbrains-crack"/>
        <updated>2021-11-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[img.png]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" alt="img.png" src="/assets/images/img-92c658b357bc2abf3b2ea9dfaba6f8da.png" width="1360" height="544" class="img_Ne1E"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_t2Hc"><div class="admonitionHeading_F_6S"><span class="admonitionIcon_LHTy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_oaIG"><p>2022.2 以上建议直接用推荐方式激活(#通过agent+激活码方式1)</p></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="通过agent激活码方式1">通过agent+激活码方式1<a href="#通过agent激活码方式1" class="hash-link" aria-label="通过agent+激活码方式1的直接链接" title="通过agent+激活码方式1的直接链接">​</a></h2><ol><li><a href="https://www.jetbrains.com/" target="_blank" rel="noopener noreferrer">JetBrains官网</a>&nbsp;下载安装你需要的 IDE，如果下载慢可以在 macwk 搜索 jetbrains。</li><li>下载&nbsp;<a href="https://macwk.lanzouo.com/i8eElxh573a" target="_blank" rel="noopener noreferrer">Jetbrains.zip</a>，下载后解压，得到 fineagent.jar，将该文件复制到&nbsp;<code>/Users/你的用户名/</code>&nbsp;文件夹下</li><li>打开访达，点击左侧的&nbsp;<code>应用程序</code>&nbsp;找到&nbsp;<code>WebStorm</code>，在 WebStorm 图标上右键，点击&nbsp;<code>显示包内容</code></li><li>进入&nbsp;<code>Contents</code>&nbsp;目录，再进入&nbsp;<code>bin</code>&nbsp;目录，使用文本编辑器打开&nbsp;<code>webstorm.vmoptions</code>&nbsp;文件</li><li>在最后面添加&nbsp;<code>-javaagent:/Users/你的用户名/fineagent.jar</code>，记得修改一下你的用户名。</li><li>运行 WebStorm, 选择&nbsp;<code>Activate WebStorm</code>，再点击&nbsp;<code>Activation Code</code></li><li>复制下面的的激活码粘贴到激活窗口的输入框中，点击&nbsp;<code>Activate</code>。可以用到 2099 年！</li></ol><div class="language-textile codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-textile codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">5AYV1D1RE5-eyJsaWNlbnNlSWQiOiI1QVlWMUQxUkU1IiwibGljZW5zZWVOYW1lIjoiaHR0cHM6Ly93d3cuaml3ZWljaGVuZ3podS5jb20iLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJJSSIsImZhbGxiYWNrRGF0ZSI6IjIwOTktMTItMzEiLCJwYWlkVXBUbyI6IjIwOTktMTItMzEifSx7ImNvZGUiOiJBQyIsImZhbGxiYWNrRGF0ZSI6IjIwOTktMTItMzEiLCJwYWlkVXBUbyI6IjIwOTktMTItMzEifSx7ImNvZGUiOiJEUE4iLCJmYWxsYmFja0RhdGUiOiIyMDk5LTEyLTMxIiwicGFpZFVwVG8iOiIyMDk5LTEyLTMxIn0seyJjb2RlIjoiUFMiLCJmYWxsYmFja0RhdGUiOiIyMDk5LTEyLTMxIiwicGFpZFVwVG8iOiIyMDk5LTEyLTMxIn0seyJjb2RlIjoiR08iLCJmYWxsYmFja0RhdGUiOiIyMDk5LTEyLTMxIiwicGFpZFVwVG8iOiIyMDk5LTEyLTMxIn0seyJjb2RlIjoiRE0iLCJmYWxsYmFja0RhdGUiOiIyMDk5LTEyLTMxIiwicGFpZFVwVG8iOiIyMDk5LTEyLTMxIn0seyJjb2RlIjoiQ0wiLCJmYWxsYmFja0RhdGUiOiIyMDk5LTEyLTMxIiwicGFpZFVwVG8iOiIyMDk5LTEyLTMxIn0seyJjb2RlIjoiUlMwIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IlJDIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IlJEIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IlJNIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IldTIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IkRCIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IkRDIiwiZmFsbGJhY2tEYXRlIjoiMjA5OS0xMi0zMSIsInBhaWRVcFRvIjoiMjA5OS0xMi0zMSJ9LHsiY29kZSI6IlJTVSIsImZhbGxiYWNrRGF0ZSI6IjIwOTktMTItMzEiLCJwYWlkVXBUbyI6IjIwOTktMTItMzEifV0sImhhc2giOiIxMjc5Njg3Ny8wIiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-HNPogO0kWkHCVMnsjmBXUqQt87UPHqdkYqZGveSJtu8hb2V2Yq7gHsHenp4UuEd3jwEwC+YrUIf7U5yDA/56F5Sdn0RLUHZX5DHeQbJPbmYCBsDRT7m8rnmMFOSZn3vwNatvv1cooZbcGOk3Wwxx6bF7XcgaIrmXRcmZMZgv2PZehr0WS1HxNKe3X4nbGP3MwiSbg4ypmxNDrljmgv+Si9QDDwNLDffqeO0Lce0FqEJuMWmvBS42S0aeIYF8IS5bp4+LFKLJ8T7tF40OxKYDurBb9+9c43GZBscM/eLB8Jos66jNGFwgebFUlvhzJKVHZtuc/N8zGeEnTq6K0T/B8w==-MIIDTjCCAjagAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMCAXDTE4MTEwMTEyMjk0NloYDzIwOTkwODA5MDIyNjA3WjAfMR0wGwYDVQQDDBRwcm9kMnktZnJvbS0yMDIwMTAxOTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMK3eyr0+Oys/TwcQO+qYaXWGBmXcEP4fR0bHHzZd/4WNGltXhecM80OWthA38BQRYAJBCKz/dSkO2Kj1H2y+7KB5cIaOiJEyTESfTSgzQdot6laRBU8oxy9mmagI46M8zEEmplPybY4YJj4HOwZiBsMQEMxoTgMDLpuHX6uASoVhSj6koB55lOj4wEgsQBeAMWTAXmTl88ixE179J8aBUkBGpL8w/tZzl9BJXZNF15gPfkS58rw8cdPzXLS0Yym37A2/KKFhfHzJc5KhbaxqYzmkAfTMqPsIqCQ1lQUAqfiPn2gN2I1Z3/cQuEW27M55fXVr2DduQe5DWzYJs85L50CAwEAAaOBmTCBljAJBgNVHRMEAjAAMB0GA1UdDgQWBBQk2hEilvWFQcCTR+gxI0z0wIQC/zBIBgNVHSMEQTA/gBSjnrZIZ0ISNkG9beC5tKBSi5fxs6EcpBowGDEWMBQGA1UEAwwNSmV0UHJvZmlsZSBDQYIJANJssYOyg3nhMBMGA1UdJQQMMAoGCCsGAQUFBwMBMAsGA1UdDwQEAwIFoDANBgkqhkiG9w0BAQsFAAOCAQEAsCQBjO5wttco/Z5cj/o4GBrku8UtBBBVFq4xsBanshTHm4deVxcTvta4aScV0TPKcaLqGqWx8A9v8XXO8dBbCuyXvWZteZ/C2Covg1xXiM99lz7VxqpjVmLdKanZn5u0gQSiYJdcfF+TdbmEIeSOnN/kLXNq2hXdJQK2zk2J25UZqu5EibRtTbdOzw6ZcfwJ8uOntXfsmAhnNICP3Wf/4wR/mwB0Ka4S+JA3IbF5MUmUZ/fjUaFarnin70us+Vxf/sZUi7u67wilvwVV0NAqDpthHUV0NRc4q+yOr2Dt/uCHdy4XRXLJfAv/z9/xBwNZZALNz3EtQL6IeIWWJByl3g==</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_er05" id="通过agent激活码方式2推荐">通过agent+激活码方式2（推荐）<a href="#通过agent激活码方式2推荐" class="hash-link" aria-label="通过agent+激活码方式2（推荐）的直接链接" title="通过agent+激活码方式2（推荐）的直接链接">​</a></h2><p><a href="https://jetbra.in/s?source=https://www.ga0x.com" target="_blank" rel="noopener noreferrer">点我传送</a></p><p><a href="https://chip-tail-e93.notion.site/Ja-netfilter-9886afbfe1ed4d5e90a713e63718f647" target="_blank" rel="noopener noreferrer">常见问题</a></p><p>2022.2 激活不了的仔细看常见问题里的 "激活操作"</p><hr><h2 class="anchor anchorWithStickyNavbar_er05" id="无限重置试用">无限重置试用<a href="#无限重置试用" class="hash-link" aria-label="无限重置试用的直接链接" title="无限重置试用的直接链接">​</a></h2><blockquote><p>此方法 Windows MacOS 通用</p></blockquote><h2 class="anchor anchorWithStickyNavbar_er05" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h2><p>Jetbrains 家的产品有一个很良心的地方，他会允许你试用 30 天（这个数字写死在代码里了）以评估是否你真的需要为它而付费。 但很多时候会出现一种情况：IDE 并不能按照我们实际的试用时间来计算。</p><p>我举个例子：如果我们开始了试用，然后媳妇生孩子要你回去陪产！陪产时我们并无空闲对IDE试用评估，它依旧算试用时间。（只是举个例子，或许你并没有女朋友）</p><p>发现了吗？你未能真的有 30 天来对它进行全面的试用评估，你甚至无法作出是否付费的决定。此时你会想要延长试用时间，然而 Jetbrains 并未提供相关功能，该怎么办？</p><p>事实上有一款插件可以实现这个功能，你或许可以用它来重置一下试用时间。但切记不要无休止的一直试用，这并不是这个插件的初衷!</p><p><img loading="lazy" alt="1.png" src="/assets/images/1-4b70ab1f49de9da505af218b91d93a33.png" width="1000" height="633" class="img_Ne1E"></p><h2 class="anchor anchorWithStickyNavbar_er05" id="如何安装">如何安装<a href="#如何安装" class="hash-link" aria-label="如何安装的直接链接" title="如何安装的直接链接">​</a></h2><blockquote><p>提供以下两种方法，二选一即可。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_er05" id="插件市场安装">插件市场安装<a href="#插件市场安装" class="hash-link" aria-label="插件市场安装的直接链接" title="插件市场安装的直接链接">​</a></h3><p>在 Settings/Preferences... -&gt; Plugins 内手动添加第三方插件仓库地址：<a href="https://plugins.zhile.io" target="_blank" rel="noopener noreferrer">https://plugins.zhile.io</a> 搜索：IDE Eval Reset 插件进行安装。</p><p><img loading="lazy" alt="2.png" src="/assets/images/2-6e4b360f19ba8c720ab2a51efcfbc146.png" width="1000" height="724" class="img_Ne1E">
<img loading="lazy" alt="3.png" src="/assets/images/3-da30d903c8c5821ef402c2f4fd2eeaf6.png" width="1000" height="746" class="img_Ne1E">
<img loading="lazy" alt="4.png" src="/assets/images/4-f8f509d2d7b54d1571dc004879b48241.png" width="1000" height="417" class="img_Ne1E">
<img loading="lazy" alt="5.png" src="/assets/images/5-059d00e30a0a8d87af9877192902c90e.png" width="1000" height="402" class="img_Ne1E">
<img loading="lazy" alt="6.png" src="/assets/images/6-bdafcf7b271aefea5e053728e225aecf.png" width="1000" height="744" class="img_Ne1E">
<img loading="lazy" alt="7.png" src="/assets/images/7-fc8b877fa34131dc5cb48f2333cf0620.png" width="652" height="760" class="img_Ne1E">
<img loading="lazy" alt="8.png" src="/assets/images/8-fda26a68c14a9cbe44ef23833f30a48e.png" width="1000" height="740" class="img_Ne1E"></p><h3 class="anchor anchorWithStickyNavbar_er05" id="手动下载安装">手动下载安装<a href="#手动下载安装" class="hash-link" aria-label="手动下载安装的直接链接" title="手动下载安装的直接链接">​</a></h3><p>点击<a href="https://www.lanzouw.com/iL6QXw03iqj" target="_blank" rel="noopener noreferrer">这个链接(v2.3.5)</a>下载插件的 zip 包（macOS可能会自动解压，切记使用的是 zip 包，不是解压后的文件夹！），然后打开 Settings/Preferences... -&gt; Plugins 手动安装插件。
<img loading="lazy" alt="9.png" src="/assets/images/9-99c91270a939035bb493c0fc19e49dde.png" width="1000" height="745" class="img_Ne1E">
<img loading="lazy" alt="10.png" src="/assets/images/10-2cdffd6ec779d5ff688eeb0d3cca0a94.png" width="1000" height="745" class="img_Ne1E">
<img loading="lazy" alt="11.png" src="/assets/images/11-000534e293c75c72e443e07dd4869d8e.png" width="1000" height="749" class="img_Ne1E">
<img loading="lazy" alt="12.png" src="/assets/images/12-82e3aa2f6b83246807725983f721ef35.png" width="1000" height="745" class="img_Ne1E"></p><h2 class="anchor anchorWithStickyNavbar_er05" id="如何使用">如何使用<a href="#如何使用" class="hash-link" aria-label="如何使用的直接链接" title="如何使用的直接链接">​</a></h2><p>一般来说，在 IDE 窗口切出去或切回来时（窗口失去/得到焦点）会触发事件，检测是否长时间（25天）没有重置，给通知让你选择。（初次安装因为无法获取上次重置时间，会直接给予提示）。</p><p>您也可以手动唤出插件的主界面：</p><p>a. 如果 IDE 没有打开项目，在 Welcome 界面点击 IDE 的菜单：Get Help -&gt; Eval Reset</p><p>b. 如果 IDE 打开了项目，点击 IDE 的菜单：Help -&gt; Eval Reset</p><p>唤出的插件主界面中包含了一些显示信息，有 2 个按钮和 1 个勾选项：</p><ul><li>按钮：Reload 用来刷新界面上的显示信息。</li><li>按钮：Reset 点击会询问是否重置试用信息并重启 IDE。选择 Yes 则执行重置操作并重启 IDE 生效，选择 No 则什么也不做。（此为手动重置方式）</li><li>勾选项：Auto reset before per restart 如果勾选了，则自勾选后每次重启/退出 IDE 时会自动重置试用信息，你无需做额外的事情。（此为自动重置方式，推荐此方法！）</li></ul><p><img loading="lazy" alt="13.png" src="/assets/images/13-eb41228014447f216e3cc24c149b23f8.png" width="1000" height="872" class="img_Ne1E">
<img loading="lazy" alt="14.png" src="/assets/images/14-a449157d9aa709fb53fd0ca96aad3764.png" width="1000" height="795" class="img_Ne1E">
<img loading="lazy" alt="15.png" src="/assets/images/15-4309cb9bd8249d06e96e2a720a3b61e1.png" width="1000" height="796" class="img_Ne1E"></p><h2 class="anchor anchorWithStickyNavbar_er05" id="如何更新">如何更新<a href="#如何更新" class="hash-link" aria-label="如何更新的直接链接" title="如何更新的直接链接">​</a></h2><ol><li>插件更新机制（推荐）：</li></ol><p>IDE 会自行检测其自身和所安装插件的更新并给予提示。如果本插件有更新，你会收到提示看到更新日志，自行选择是否更新。</p><p>点击 IDE 的 Check for Updates... 菜单手动检测 IDE 和所安装插件的更新。如果本插件有更新，你会收到提示看到更新日志，自行选择是否更新。</p><p>插件更新可能会需要重启IDE。</p><ol start="2"><li>手动更新：</li></ol><p>从本页面下载最新的插件 zip 包安装更新。插件更新需要重启IDE。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="一些说明">一些说明<a href="#一些说明" class="hash-link" aria-label="一些说明的直接链接" title="一些说明的直接链接">​</a></h2><p>市场付费插件的试用信息也会一并重置。</p><p>MyBatisCodeHelperPro 插件有两个版本如下，功能完全相同，安装时须看清楚！</p><ul><li><a href="https://plugins.jetbrains.com/plugin/14522-mybatiscodehelperpro-marketplace-edition-" target="_blank" rel="noopener noreferrer">MyBatisCodeHelperPro</a> (Marketplace Edition)，可重置！</li><li><a href="https://plugins.jetbrains.com/plugin/9837-mybatiscodehelperpro" target="_blank" rel="noopener noreferrer">MyBatisCodeHelperPro</a>，不可重置！</li></ul><p>对于某些付费插件（如: Iedis 2, MinBatis）来说，你可能需要去取掉 javaagent 配置（如果有）后重启IDE：</p><ul><li>如果IDE没有打开项目，在 Welcome 界面点击菜单：Configure -&gt; Edit Custom VM Options... -&gt; 移除 -javaagent: 开头的行。</li><li>如果IDE打开了项目，点击菜单：Help -&gt; Edit Custom VM Options... -&gt; 移除 -javaagent: 开头的行。</li></ul><p>重置需要重启IDE生效！</p><p>重置后并不弹出 Licenses 对话框让你选择输入 License 或试用，这和之前的重置脚本/插件不同（省去这烦人的一步）。</p><p>如果长达 25 天不曾有任何重置动作，IDE 会有通知询问你是否进行重置。</p><p>如果勾选：Auto reset before per restart ，重置是静默无感知的。</p><p>简单来说：勾选了 Auto reset before per restart 则无需再管，一劳永逸。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="中文汉化包">中文汉化包<a href="#中文汉化包" class="hash-link" aria-label="中文汉化包的直接链接" title="中文汉化包的直接链接">​</a></h2><p>JetBrains 系列大部分在<strong>官方</strong>的插件中心直接安装使用了。</p><p>以 WebStrom 为例，打开它的设置，点击 Plugins，搜索 chinese，安装即可。</p><p><img loading="lazy" alt="16.png" src="/assets/images/16-754cc2cf3788ef148c9ea31d72247afa.png" width="1500" height="994" class="img_Ne1E"></p><h2 class="anchor anchorWithStickyNavbar_er05" id="支持的产品">支持的产品<a href="#支持的产品" class="hash-link" aria-label="支持的产品的直接链接" title="支持的产品的直接链接">​</a></h2><ul><li>IntelliJ IDEA</li><li>AppCode</li><li>CLion</li><li>DataGrip</li><li>GoLand</li><li>PhpStorm</li><li>PyCharm</li><li>Rider</li><li>RubyMine</li><li>WebStorm</li></ul>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="JetBrains" term="JetBrains"/>
        <category label="IDE" term="IDE"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[优秀的 REST API 设计指南]]></title>
        <id>https://www.ga0x.com/blog/2020/07/31/rest-api-design</id>
        <link href="https://www.ga0x.com/blog/2020/07/31/rest-api-design"/>
        <updated>2020-07-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[本文建议读者：]]></summary>
        <content type="html"><![CDATA[<p>本文建议读者：</p><ul><li>后端工程师、架构师</li><li>需要跟后端协同的前端工程师</li><li>以API提供服务的软件提供商</li></ul><h2 class="anchor anchorWithStickyNavbar_er05" id="前言">前言<a href="#前言" class="hash-link" aria-label="前言的直接链接" title="前言的直接链接">​</a></h2><hr><p>作为一名优秀的后端程序员，你照着产品需求设计好了模型，设计好了关联关系。</p><p>把这些模型和关系一再打磨了一番之后，你想是时候把API设计出来，与前端沟通了。</p><p>这时候问题来了：</p><p>一旦 API 进入前端 APP 代码，或者是被你的顾客广泛使用的话，再来大改就非常麻烦了。比如说，如果 APP 版本 1.0 用了一个接口 A，这个接口 A 如果要进行大改，那么必须将 A 维持至所有用户升级过 APP 1.0 后。</p><p>那么怎么样避免 API 发布之后大改呢？有没有一些提前可以注意到的设计准则可以帮我们避开 API 设计中的各种坑？</p><p>答案是有的。网上充满了各种对 API 设计的建议，而这篇文章里我们结合卡拉搜索设计 API 的经验，把 REST API 的最佳实践和常见的坑都总结出来，做成一个教程，希望可以在帮到正在设计/使用 API 的你。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="rest-api-是什么---程序员与服务之间沟通的语言">REST API 是什么 - 程序员与服务之间沟通的语言<a href="#rest-api-是什么---程序员与服务之间沟通的语言" class="hash-link" aria-label="REST API 是什么 - 程序员与服务之间沟通的语言的直接链接" title="REST API 是什么 - 程序员与服务之间沟通的语言的直接链接">​</a></h2><hr><p>任何语言的本质都是一套规则的合集。比如说，中文里要求句子要有主谓宾，而作为母语为中文的我们，一旦有人说了一句缺少主语的话，我们会直觉性地感觉很奇怪。</p><p>比如说，如果有人对你说“是一个神人”。</p><p>你会直觉地问：究竟谁是一个神人？</p><p>同样的，在各个程序的沟通中，或者各个服务的沟通中，我们也需要类似“语言”的东西，让我们可以不需要太多的上下文，就可以前端理解后端、后端也理解前端。</p><p>设想一下，有多少次你跟前端一起需要前后端 <code>联调</code>？有多少次前端觉得你定义的 API 不够方便直观，一定要你多返回一个参数或者改一下端点路径？</p><p>其实本质上，你们在 <code>联调</code> 时就是在尝试设计一个“语言”，以方便互相可以更容易地理解对方。</p><p>比如说，后端会要求前端说，你调用 <code>POST /user/abc</code> 就可以创建一个名为 <code>abc</code> 用户了。</p><p>短线来讲这当然没问题，你们可以几乎任意地定义 API 端点，任意地调整传递的参数。但是一旦项目开始变复杂，问题就开始出现了。</p><ul><li>首先大家有不同的经验和喜好，对 API 的定义可能千差万别，所谓众口难调</li><li>系统开始复杂后，各个系统之间的 API 因为定义的人的不同，会开始出现不一致，导致每个端口调用前需要详细阅读文档（如果有的话）或者与 API 设计者无穷无尽地讨论和会议</li><li>如果你的 API 是面向客户的，比如如果你是一家软件服务公司，那么你自定义的 API 会增加客户接入的成本</li><li>等等等等</li></ul><p>因此，要是有一套人类通用的"语言“或者”规范“，来指导大家定义 API 的方式，那样该多好？</p><p>REST API 就是这样一种规范，它是目前整个互联网应用最广泛的 API 规范。有意思的是，REST是由它的提出者 Roy Fielding 在他读书期间，写的博士论文里提出的。</p><p>总结一下，REST API 有一套 API 设计的准则，它规范了 API 设计的框架，使得服务间、程序员之间有一个通用的沟通语言。如果需要读 API 更广泛的定义，请参考文章<a href="https://kalasearch.cn/blog/what-is-api" target="_blank" rel="noopener noreferrer">什么是 API</a></p><p>REST API是沟通语言</p><h2 class="anchor anchorWithStickyNavbar_er05" id="rest-api-内具体规定了什么">REST API 内具体规定了什么<a href="#rest-api-内具体规定了什么" class="hash-link" aria-label="REST API 内具体规定了什么的直接链接" title="REST API 内具体规定了什么的直接链接">​</a></h2><hr><p>REST API 规范了 API 设计的两大核心原则</p><ol><li>API应该作用于 Resource（资源）上</li><li>对资源的操作应使用对应语义的几种操作，包括： GET, POST, PUT, PATCH, DELETE</li></ol><p>我们来详细解释一下这两点</p><h3 class="anchor anchorWithStickyNavbar_er05" id="什么是-rest-api-里的-resource即资源">什么是 REST API 里的 Resource（即资源）<a href="#什么是-rest-api-里的-resource即资源" class="hash-link" aria-label="什么是 REST API 里的 Resource（即资源）的直接链接" title="什么是 REST API 里的 Resource（即资源）的直接链接">​</a></h3><p>这里的资源是指你的 API 用户可操作的逻辑对象，举个例子</p><p>如果你的 API 中允许调用者对用户进行操作，比如说用户注册，那么 API 类似于</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">POST /users</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在这里，资源即为 <code>users</code>。在很多情况下，API 中的资源与你的数据模型（也就是数据库的表）是一一对应的。当然也有例外情况，比如说你的数据库中存有用户，但是你现在想要让调用者可以创建“管理员”，那么 API 可能是</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">POST /admins</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然而，你的表中并没有 <code>admins</code> 这个表，而是否是 admin 是 Users 表中的一个属性，比如 <code>role=admin</code>。</p><p>请注意，REST API中的资源一定需要是名词，即一定是一个实在存在的概念比如 <code>用户</code>, <code>帐号</code>, <code>车票</code>等，或一个抽象的概念比如 <code>权限</code> 等。如果你需要提供一个创建某种资源的API接口，上述则可以表述为</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">POST /indexes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /docs</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>等等。</p><p>通常对于资源的命名，我们建议统一命名为为英文的复数。比如说 <code>users</code> 而不是 <code>user</code>。同时请注意保持一致性，在所有地方用一样的复数。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="什么是-rest-api-里的操作">什么是 REST API 里的操作<a href="#什么是-rest-api-里的操作" class="hash-link" aria-label="什么是 REST API 里的操作的直接链接" title="什么是 REST API 里的操作的直接链接">​</a></h3><p>一旦你定义了资源，接下来你需要定义允许调用者在这些资源上做什么操作。</p><p>比如说，以携程抢车票网站为例，我们可能允许调用者进行以下操作</p><ul><li><code>GET /tickets</code> - 列出所有车票</li><li><code>GET /tickets/9839</code> - 列出 id 为 9839 这张车票的信息</li><li><code>POST /tickets</code> - 创建一张车票</li><li><code>PUT /tickets/9839</code> - 更新 9839 这张车票的信息</li><li><code>PATCH /tickets/9839</code> - 部分修改 983 这张车票的信息，比如只修改车票价格</li><li><code>DELETE /tickets/9839</code> - 删掉 9839 这张车票</li></ul><p>请注意，到这里为止，你应该可以总结出来REST的大致设计思路了。它由两部分组成，第一部分是 <code>操作</code>，第二部分是可操作的 <code>资源</code>。比如上文中的 <code>GET /tickets</code>，操作是 GET，可操作的资源是车票。</p><p>那么读到这里，如果你严格遵循了REST的设计准则，以及你的调用者也了解 REST 的准则的话，那么对于很多 API 调用，你们不用再参考互相写的文档了。如果需要调用一张车票的信息，你的调用者自然会知道应该用GET去查看一个车票资源的信息，即 <code>GET /tickets/:ticketId</code>。这样就极大降低了沟通成本和出错成本，提升效率。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="如何在-api-中表示实体数据库表间关系">如何在 API 中表示实体（数据库表）间关系<a href="#如何在-api-中表示实体数据库表间关系" class="hash-link" aria-label="如何在 API 中表示实体（数据库表）间关系的直接链接" title="如何在 API 中表示实体（数据库表）间关系的直接链接">​</a></h3><p>在后端设计中，有的资源逻辑上无法独立存在。比如说，在卡拉搜索的例子里，用户的文档是无法独立于索引存在的。那么自然地，我们用</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">GET /indexes/index_abc/docs/1</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>来表达获取索引 <code>index_abc</code> 中编号为 <code>1</code> 的文档。因此，对于所有资源需要依赖于另一个资源存在时，我们就按顺序在端点中将资源列出来。对于卡拉搜索中，索引和文档的关系，我们有以下接口</p><ul><li><code>GET /indexes/index_abc/docs/1</code> - 获取index id为 <code>index_abc</code> 下的id为 <code>1</code> 的文档</li><li><code>GET /indexes/index_abc/docs</code> - 获取index id为 <code>index_abc</code> 下的所有文档</li><li><code>POST /indexes/index_abc/docs</code> - 在index id为 <code>index_abc</code> 的索引中，添加文档 ...</li></ul><p>如果一个资源可以独立于另一个资源存在，并且你期望你的API调用者频繁调用，那么可以考虑直接提供子端点。比如说，如果一个宠物店主人和宠物信息分别都常常被同时调用，那么你可以考虑</p><div class="language-text codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">GET /owners/  - 获取所有主人信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /owners/1/pets/ 获取 id 为 1 的主人的所有宠物</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /pets/ - 获取所有宠物信息（宠物店所有宠物）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /pets/13 - 直接获取 id 为 13 的宠物</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="rest-api中如何表示一个动作">REST API中如何表示一个动作<a href="#rest-api中如何表示一个动作" class="hash-link" aria-label="REST API中如何表示一个动作的直接链接" title="REST API中如何表示一个动作的直接链接">​</a></h3><p>有时候，当我们试图表达一些接口时，会发现REST的准则很难直接应用。比如说，当你需要一个接口让用户登录时</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">POST /users/signin</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但要注意，这里的 <code>signin</code> 即登录，是一个动词。这里是采用REST准则时需要考虑的地方，你有三个选择</p><ol><li>如果你希望严格地遵循 REST 原则，那么你需要找一个替代动词的名词。比如说，这里的 <code>signin</code> 可以替换为<code>login</code>。或者，如果你是以 token 密钥的方式登录的话，也许可以改为 <code>POST /users/token</code>，即创建一个 user token(也就是登录了)</li><li>在某些实在困难的地方，放弃严格的REST原则</li><li>参考一些成功的 REST API 并寻找类似的 API，参考他们的命名设计</li></ol><p>对于3，我强烈建议你参考 github 的 API，原因不光是其极为规范，还有它覆盖了极多的 API 调用的情景，因此大概率你可以找到个类似的命名参考。</p><p>比如说，在 github 上，如果让你来设计加星这个操作，你会把端点被设计成什么样？</p><p>Github把加星端点设计为 <code>PUT /gists/:id/star</code>，把取消加星设计为 <code>DELETE /gitsts/:id/star</code>。这样就完美地遵循了 REST 名词作为资源的准则，把动词"加星“完美地用 <code>PUT/DELETE</code> 两个操作，清晰地表达了出来。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="rest-api-设计常见问题和建议">REST API 设计常见问题和建议<a href="#rest-api-设计常见问题和建议" class="hash-link" aria-label="REST API 设计常见问题和建议的直接链接" title="REST API 设计常见问题和建议的直接链接">​</a></h2><hr><p>上面我们描述了 REST 设计的准则，而在准则中并不包括其它”最佳实践“。</p><p>这里的最佳实践，其实并没有什么客观标准，只是软件工程和架构经过多年的发展，REST API 的设计也从十几年前简单的web 应用，到应用到现在越来越复杂企业级软件中。因此，如果你刚刚开始学习 REST API 的设计，参考这些实践经验将会有非常大的帮助，可以帮你少走不少绕路。</p><p><a target="_blank" href="/assets/files/1-dd80166624b4ba531878842200a0d4b9.png"><img loading="lazy" alt="REST API 最佳实践" src="/assets/images/1-dd80166624b4ba531878842200a0d4b9.png" width="700" height="368" class="img_Ne1E"></a>REST API 最佳实践</p><h3 class="anchor anchorWithStickyNavbar_er05" id="rest-api-如何区分版本">REST API 如何区分版本<a href="#rest-api-如何区分版本" class="hash-link" aria-label="REST API 如何区分版本的直接链接" title="REST API 如何区分版本的直接链接">​</a></h3><p>在设计 REST API 时，你应该时刻准备好不断更新 API。想要把 API稳定后再一次发布多数情况下是不实际的——老板要催进度，用户要催功能。因此，在设计 API 的时候就应该把支持 API 改动设计到API本身中。</p><p>多数情况下，在一版 API 已经成熟的前提下，可以提前发布，同时开始进行下一版的开发。而你只需要在URL中区分好 API 的版本即可。</p><p>比如说，如果在大致将 v1 开发完毕后，v1 前缀的 API 就应该稳定下来，所有的改动进入 v2。同时你应该开始通知所有使用 v1 的用户，给他们几周到几个月的时间，帮助他们平滑迁移到 v2</p><p>带有版本前缀的 API 示例如下</p><div class="language-curl codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-curl codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">GET /v1/indexes/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /v1/indexes/abc/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /v1/indexes/</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="rest-api-应该返回什么">REST API 应该返回什么<a href="#rest-api-应该返回什么" class="hash-link" aria-label="REST API 应该返回什么的直接链接" title="REST API 应该返回什么的直接链接">​</a></h3><p>作为一个通则，我们建议 REST API 永远返回 JSON 格式的结果。</p><p>原因有几个：</p><p>首先，JSON 作为互联网上使用最广泛的格式，在几乎任何语言的任何框架中都有广泛的支持。</p><p>同时，由于其高度的可读性，如果需要阅读返回内容，JSON 会让你的调用者阅读起来方便很多。</p><p>最后，JSON 的高压缩率可以在需要时方便地帮你提升传输效率和速度。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="为什么要给你的-api-编写文档">为什么要给你的 API 编写文档<a href="#为什么要给你的-api-编写文档" class="hash-link" aria-label="为什么要给你的 API 编写文档的直接链接" title="为什么要给你的 API 编写文档的直接链接">​</a></h3><p>写代码时，遇到稍复杂的逻辑，我们会发现如果没有注释，一个月后回来发现自己当时写的代码根本不像自己亲生的。再试图熟悉时，可能几个小时就过去了。</p><p>同样，对于 API 来说，如果你不写文档，那么在集成时，你的调用者肯定一边骂，一边尝试各种参数组合。为了让你的调用者有更顺滑的接入体验，每个 API 的设计者都应该把 API 文档作为与 API 的代码一样重要的模块。</p><p>好的 API 文档不光可以方便调用者的接入，更可以方便让你把 API 更改等信息传递出去，而不是一个一个单独通知你的用户。同时在编写文档时，你也会尝试着以你描述地方式接入，间接做了一次"dog food"自测。</p><p>如果你是面向开发者的 API 的话，优秀的 API 文档还可以作为强大的品牌宣传。在卡拉搜索我们花大力气维护我们的文档，同时我们也参考和致敬其它我们用过或者觉得值得夸奖的 API 文档：</p><ul><li><a href="https://kalasearch.cn/docs" target="_blank" rel="noopener noreferrer">卡拉搜索 API 文档 - 用 API 实现搜索引擎</a></li><li><a href="https://leancloud.cn/docs/rest_api.html" target="_blank" rel="noopener noreferrer">Leancloud API文档</a></li><li><a href="https://developer.github.com/v3/" target="_blank" rel="noopener noreferrer">Github API 文档</a></li></ul><h3 class="anchor anchorWithStickyNavbar_er05" id="默认开启-gzip-和-pretty-print">默认开启 Gzip 和 Pretty print<a href="#默认开启-gzip-和-pretty-print" class="hash-link" aria-label="默认开启 Gzip 和 Pretty print的直接链接" title="默认开启 Gzip 和 Pretty print的直接链接">​</a></h3><p>在返回你的 REST API 结果时，我们建议打开 Gzip 和 Pretty print 两个选项。</p><h4 class="anchor anchorWithStickyNavbar_er05" id="打开-gzip">打开 Gzip<a href="#打开-gzip" class="hash-link" aria-label="打开 Gzip的直接链接" title="打开 Gzip的直接链接">​</a></h4><p>Gzip 非常好理解，在目前的普通手机算力已经接近十几年前的顶配计算机的前提下，CPU 不再是运算的瓶颈。而网络带宽的扩宽速度则远没有追上 CPU 变快的速度。因此，如果有可能的话，用 CPU 的时间换取网络的传输时间是非常值得的。这也就是说，打开默认 Gzip 压缩，会让你的 JSON 结果耗费少量的服务器 CPU，但却能大大加快传输速度。</p><p>因此我们建议默认将 Gzip 打开。</p><h4 class="anchor anchorWithStickyNavbar_er05" id="打开-pretty-print">打开 Pretty Print<a href="#打开-pretty-print" class="hash-link" aria-label="打开 Pretty Print的直接链接" title="打开 Pretty Print的直接链接">​</a></h4><p>什么是 Pretty print 呢？简单说就是在 JSON 中插入空格和换行，让 JSON 变得美观，方便人阅读。比如下面不是Pretty print:</p><div class="language-text codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">{"name":"大话西游","actor":"周星驰”}</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>而下面是打开 Pretty print 后的同一个 JSON</p><div class="language-text codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "name": "大话西游",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "actor": "周星驰”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 JSON 稍变得复杂之后，如果没有 Pretty print 的 JSON 将会变得完全不可读。虽然打开 Pretty print 会增加一些空白字符，但是由于打开 Gzip 压缩，这些空白字符所占用的空间都会被压缩掉，所以并不用担心网络传输时，JSON 变得更大更慢。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2><p>API是程序员与程序员沟通的语言，一个优秀的API不光可以让你维护起来更轻松，也会让你的调用者在使用时更得心应手。遵循 REST 准则设计出来的优秀的 API，可以减少你与调用者之间的沟通成本，让你可以用更多的时间专注在其它更重要的事情上。</p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="REST API" term="REST API"/>
        <category label="设计" term="设计"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[CentOS 7 下 yum 安装和配置 NFS]]></title>
        <id>https://www.ga0x.com/blog/2020/07/28/centos7-install-nfs</id>
        <link href="https://www.ga0x.com/blog/2020/07/28/centos7-install-nfs"/>
        <updated>2020-07-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[前言]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_er05" id="前言">前言<a href="#前言" class="hash-link" aria-label="前言的直接链接" title="前言的直接链接">​</a></h2><p><strong>NFS 是 Network File System 的缩写，即网络文件系统。功能是让客户端通过网络访问不同主机上磁盘里的数据，主要用在类Unix系统上实现文件共享的一种方法。 本例演示 CentOS 7 下安装和配置 NFS 的基本步骤。</strong></p><h2 class="anchor anchorWithStickyNavbar_er05" id="服务端">服务端<a href="#服务端" class="hash-link" aria-label="服务端的直接链接" title="服务端的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_er05" id="安装">安装<a href="#安装" class="hash-link" aria-label="安装的直接链接" title="安装的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> nfs-utils</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="配置开机启动和启动服务">配置开机启动和启动服务<a href="#配置开机启动和启动服务" class="hash-link" aria-label="配置开机启动和启动服务的直接链接" title="配置开机启动和启动服务的直接链接">​</a></h3><p>设置 NFS 开机启动</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> rpcbind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> nfs</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>启动 NFS 服务</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start rpcbind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start nfs</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="配置共享目录">配置共享目录<a href="#配置共享目录" class="hash-link" aria-label="配置共享目录的直接链接" title="配置共享目录的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">755</span><span class="token plain"> /data</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>配置配件</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> /etc/exports</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>添加如下配置</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">/data/     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.0/24</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rw,sync,no_root_squash,no_all_squash</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><code>/data</code>: 共享目录位置。</li><li><code>192.168.0.0/24</code>: 客户端 IP 范围，<code>*</code> 代表所有，即没有限制。</li><li><code>rw</code>: 权限设置，可读可写。</li><li><code>sync</code>: 同步共享目录。</li><li><code>no_root_squash</code>: 可以使用 root 授权。</li><li><code>no_all_squash</code>: 可以使用普通用户授权。</li></ol><p>重启 NFS 服务</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart nfs</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查配置的共享目录是否正确</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ showmount -e localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Export list </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> localhost:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/data </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.0/24</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>服务端配置完毕，接下来配置客户端。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="客户端">客户端<a href="#客户端" class="hash-link" aria-label="客户端的直接链接" title="客户端的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_er05" id="安装-nfs">安装 NFS<a href="#安装-nfs" class="hash-link" aria-label="安装 NFS的直接链接" title="安装 NFS的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> nfs-utils</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_er05" id="配置">配置<a href="#配置" class="hash-link" aria-label="配置的直接链接" title="配置的直接链接">​</a></h4><p>设置 rpcbind 开机启动</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> rpcbind</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>启动服务</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start rpcbind</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_er05" id="客户端连接nfs">客户端连接NFS<a href="#客户端连接nfs" class="hash-link" aria-label="客户端连接NFS的直接链接" title="客户端连接NFS的直接链接">​</a></h4><p>查看服务端的共享目录</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ showmount -e </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.110</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Export list </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.110:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/data </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.0/24</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在客户端创建目录</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /data</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>挂载远程目录</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> -t nfs </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.101:/data /data</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>mount</code>命令查看一下挂载情况</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.110:/data on /data </span><span class="token builtin class-name">type</span><span class="token plain"> nfs4 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rw,relatime,sync,vers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4.1</span><span class="token plain">,rsize</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">131072</span><span class="token plain">,wsize</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">131072</span><span class="token plain">,namlen</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">255</span><span class="token plain">,hard,proto</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp,port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">,timeo</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">600</span><span class="token plain">,retrans</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">,sec</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">sys,clientaddr</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.100,local_lock</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.101</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>说明已经挂载成功了</p><h3 class="anchor anchorWithStickyNavbar_er05" id="客户端自动挂载">客户端自动挂载<a href="#客户端自动挂载" class="hash-link" aria-label="客户端自动挂载的直接链接" title="客户端自动挂载的直接链接">​</a></h3><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> /etc/fstab</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在结尾添加类似如下配置</p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /etc/fstab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Created by anaconda on Thu May 25 13:11:52 2017</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cl-root     /                       xfs     defaults        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">414ee961-c1cb-4715-b321-241dbe2e9a32 /boot                   xfs     defaults        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cl-home     /home                   xfs     defaults        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cl-swap     swap                    swap    defaults        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.110:/data     /data                   nfs     defaults        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重新加载 <code>systemctl</code></p><div class="language-shell codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-shell codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="CentOS" term="CentOS"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[了解一致性哈希]]></title>
        <id>https://www.ga0x.com/blog/consistent-hash</id>
        <link href="https://www.ga0x.com/blog/consistent-hash"/>
        <updated>2020-07-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[了解一致性HASH之前我们先来了解下取模算法]]></summary>
        <content type="html"><![CDATA[<p>了解一致性HASH之前我们先来了解下取模算法</p><h2 class="anchor anchorWithStickyNavbar_er05" id="举个例子">举个例子<a href="#举个例子" class="hash-link" aria-label="举个例子的直接链接" title="举个例子的直接链接">​</a></h2><p>我们通常用到的Redis缓存，如果数据量较少一台Redis就搞定了。但是数据量大了，或者为了高可用可能就需要多台了。如果我们现在有4台Redis那么我们怎么能让数据尽量存储平均呢？</p><p>最简单的办法就是：
<strong>Hash(key) % N</strong>，key是要存储的数据，N是Redis的数量，在这里N=4。</p><p><img loading="lazy" alt="Alt text here" src="data:image/jpeg;base64,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" width="913" height="334" class="img_Ne1E"></p><p>上面的方法看起来比较美好，但是一旦扩容就会遇到问题。假设说我们现在4台Redis不够用了要加一台那么我们的算法就变成了<strong>Hash(key) % 5</strong>；导致大部分key都会找不到。如果当前并发量比较大就会发生我们常说的<strong>缓存雪崩</strong>。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="一致性hash算法">一致性HASH算法<a href="#一致性hash算法" class="hash-link" aria-label="一致性HASH算法的直接链接" title="一致性HASH算法的直接链接">​</a></h2><p>一致性HASH算法可以很好的解决我们上面出现问题，原理也是用取模的方法，不过一致性HASH算法是对<strong>2^32</strong>取模，简单来说一致性HASH是将哈希值形成一个圆环，范围是 0 - 2^32；整个HASH环如下</p><p><img loading="lazy" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAHUAcEDASIAAhEBAxEB/8QAGgABAAMBAQEAAAAAAAAAAAAAAAECAwQFBv/EABcBAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAfdEAAAAAAAAAAAAChcoXAAAAAAAAAAAAAAAAAAAAAAAAiamWc9RE0FZx2NOfo5DbXn6AAAAAAAAAAAAAAAAAAAAAAAAAABhv89N+7Tg6t8+wZoAAAAAAAAAAAAAAAAAAAAAAAzNGMWbsIOjzumFvUZ6XNK9DBLuy0AAAAAAAAAAAAAAAAAABUtGMWXrYlLiBQAAQAFKXRWwuk4F3VtKAAAAAAAAAAAAAAimaWiywEAAACgAAAAAAisyXScLLqTLAAAAAAAAAABBOEXua2ECggAAAKAAAAAAAACK75UXpUvNQAAAAAAAAQMF7kEAAAAAACgAAAAAAAAgCm1KL0q2agAAAAQAA57TYDIAAAAAAAUAAAAAAAAAEAU6MqtbhQAAAgBS/Ok2LkAAAAAAAAKAAAAAAAAAAARInXm6JsICgAgDKK3uQQAAAAAAAAKAAAAAAAAAAAARNJegNAABDPTCyZLkAAAAAAAAAAAAAAAAAAAAAABtz7zUwShQRGF1gXIAAAAAAAAAAAAAAAAAAAAAAFdaJrUShQRjNbXIWAAAAAAAAAAAAAAAAAAAAAAAImkvQJoKERhel7gKAAAAAAAAAAAAAAAAAAAAAAAUvEbKXmwpW1IztE3AUAAAAAAAAAAAAAAAAAAAAAAAETpnpNhSl6RSYm4CgAAAAAAAAAAAAAAAAAAAAAAAidM9JsKRKMLUvcBQAAAAAAAAAAAAAAAAAAAAAAArF9K2mwoI571tchYAAAAAAAAAAAAAAAAAAAAAAApesu4mgoIyXyubCwAAAAAAAAAAAAAAAAAAAAAAATLoJoABz9GVgXIAAAAAAAAAAAAAAAAAAAAAAFd8dpoJQAESMLVtchYAAAAAAAAAAAAAAAAAAAAAiay62GggAACMd8bJDIUAAAAAAAAAAAAAAAAAAABXXPeagSgAAACTmvfK5sLAAAAAAAAAAAAAAAAAAAFWktw0AAAEAATnoOeytzYIAAAAAAAAAAAAAAAAFITLOkpqBQAAAQAAAz0k57WzubBAAAAAAAAAAAAAAApEXljYmoAFAAABAAAAE1srnnbJCtmQAAAAAAAAAAAoVi1batVsmWAABQAAAQAAAAFARltMc19M7CpLCwAAIAACgCIltW2i5azKwIAAACgAAAgAAAAKACAFbKyjcnO3gym0JAACRRtK4zrMUsWgBAAAAAUAAAEAAAABQAAAAQkIAAAFBAAAAAAAAAUAAB//xAAnEAABAwMEAgIDAQEAAAAAAAABAAIREjFQITAyQAMgECIEI0JgM//aAAgBAQABBQL/ACj+KZwyBtUatABZV/sfxVVPia77Y8mAwguREoNhO/7P4oj9TdfLlXvbFbExzact+U2ny+JlPiYJflvy2VKn9XhtkK2qtS5fZQqVQFSFSFC+ylyrKrGJrX2KpG/SF9gq1M4IkBVEqOrClwQcD3joqiUB2SJUkIGe2XKO7CDuySXICMBNKv1SYXLB2QM9MmByOEsgZ6J0XLD2QMjf5HEcTvPM4sfU7jjAAjFnVMO5c4w6bbzj2aHZGpxx2XnTIM2Dq/IWd7HQNtkDZplvr5LZJns7nkhz9f7yR9m5N3H0Nm8cmzj8u4ttk2cPl/EWybOPy/gLZNnH5dxFsmzj8mzeOT8fD0bbJOsLegvknW9TzyX9er8m3l6uEtGoyLOPtY5A7D75BvL3IkC2OOgaIGw7R2OGrtkiQMaU0QNp4jGt1O5xOKvvOEgYkpojfcJQM4ho6LmoGcLZNHTc1Azg7IN6rmypwMoN65ErVvfugI7RYp7cqme7EqmFPXlQSgIwB1VC1CkHozCuqUABhS0FUKHKVUNmQpX2VKDQMZCoaqAqFQqFQqAqGqAP8l//xAAeEQACAgMAAwEAAAAAAAAAAAABEQBAAiAwElBgIf/aAAgBAwEBPwH4fDHyKmX5krbgyUcdZx8XHffV3CaYPE1QfSGuLw0NkaGyPuDZGhsjQ2Rqa42NcbmqPTqiuq7qguaqqKKKKL1X/8QAGhEAAgIDAAAAAAAAAAAAAAAAAREAIUBgkP/aAAgBAgEBPwHRzAKeYugX/8QAJxAAAQMDAgUFAQAAAAAAAAAAAQARUCExQAIwMkFRYXEQEiBgkSL/2gAIAQEABj8C+rCRovbq6I+aeo0t66UdJvIOnLv49LkLiJWnx66OyOrk0tcLiCAcS/lAoS+kpk8lTSuQXEuI/G5XEuS4YqlVdsG6qGVIKqpRVrjdYCmX1VMthUpzXNpRNqyaWgeox62g6YrmFcYbmHcYPaJff9v7FtymmN9x419tusf7dp49+mz5kW2PEiD9A8yZHyEzqkxMmaHwKEwZkzJmShKCYPyMz5kx8gZM/QCJFuuwDI+PoTx/YbTLvM+6NfdaLbfY3maXiXOC4vDucNxeFc4vdMbwPdOb5FajPp+5f8qtMz+vzOoq0yK0VIH+SqjDoFUw1lQ+lQVfZuuasqmOsuf6rlcRXEVcrn+q31P/xAApEAEAAQMDAgcAAwEBAAAAAAABEQAhMUFQUUBhIDBxgZGhsRDw8WDB/9oACAEBAAE/If8AlEllrn7/AAlVZY3FIkS6VESLykpQ3XQtWC8/xLSkWa/Y/f4JSJUAKRgYE23CbgsaFRsl7oD+P/NKRT6JpXrwImK/Y/f4ZQvY1Zg2C+7Wm9Jr3r/YrO1GJ3ef4upuTb16Avu9kcxTimCrlz3BYzTpM+l6k5Pep/8ASrs/AqWvyVDl+alyT716/wA0EWk96noXvVmF7lQ8vqoM/Bo11PUoRwjs6gSsUnS0XIPRXJK96iMedwEPauCXrRDN3UDJOxZVTjIctRbyXfpUzJZ5KMy37rEvt1yBKwU4uDloS+Xl6kcs80Z9n3QiVPVxtBeyy61ulSrtjzo9TZLeVAIOvQSGhf2RQgkudKAlYpni0Gx3c+8ozJ0YTOKvoOhsqK1eOaMyfHQoEtXWhobOitbjmimOgW9px32mbHGpQySedIhtZ9wx28315sVE767WIQ1KaDzJ7csbbJB0zQiSeVYjn8UEEG3KT3HlKbnY9Nvtg5oMknkRRM2UEEbgonjj08hbiJ+AfGpF0rky33EyioB8Sx5RudvaZ8V4cE7nYO5Hiyntudq+HxYLy7pC54MlYNzSSKUt28H0K+lumLwrBun7PhmDdP2fB9asPpvH9avobp9PeNR6VGCdvDYffc9DljxWelueT9/Fb2mNzubgjxTBTgdxbE0Yk5b+MPlTcbwGqKLeMR7F3G5ulnkTA608HJZ29XKgzXXyR2DZ28fMe/lEy1p2hwztqgq1OdfLkQ99tHbGO/m6rDja2VHXPpQAQeaMT80mcI2lRi64Kh8rl8+2cGK9xrs6wS169+dDJ/Y1A2VYS0q/GcdHI/6K9A6mxqC9TPwnHShcW5UQYY2EwsX4VEyT+OnMw0n2ipnrie3Q8c89VclR20rKBLq2Fi7wUOhjrECEml5bcNBmJLv06cF3go45wUJgRsABCTTDIdm5U/ol6MR6FGTFC5D3bVN4uCsARsuQFWZT1vUGg+jVuB7ULoqfHNJ5FX4F7VC0Hq1Ny+1YINsQ5Cux9q/uVf0PgAXc+Su0fWjEA/5L/9oADAMBAAIAAwAAABD77777777777r7rr77777777777777777777777647pr5b7777777777777777777777777+vH777777777777777777777777b3zQMwYr7777777777777777777xKcDzz/8A9fr02++++++++++++++3C/8A/wD/AN999999/qU6+++++++++++ZiA//AP8A/wB99999999vtK+++++++++d/wD/AP8A/wD/AP333333333/AP1A8888+++wf/8A/wD/AP8A/wD3333333333/8Am8888++//wD/AP8A/wD/AP8A/wDfffffffffffaaPvPPvvP/AP8A/wD/AP8A/wD/AH3333333333307Tzz63zz333333333333333333330CV7z7jzz333333333333333333330CD7z6L33333333333333333333330Cz7z4v33333333333333333333330B97z7f33333333333333333333330D/by7f33333333333333333333330D9bypP33333333333333333333330CP7z6733333333333333333333330B77z4Xz3333333333333333333330CX/8A+509999999999999999999999AN//wDrivfffffffffffffffffffffRnP8A/wC+MX99999999999999999999th/wD/AP77qkAAAAAAAAAAAAAAAAAAAA1z333774Lz/wD/AP8A/wD/AP8A/wD/AP8A/wD/AP8A/wBwS8999++++qx+/wD/AP8A/wD/AP8A/wD/AP8A/wD/AH6L7z33377774BzP/8A/wD/AP8A/wD/AP8A/wCfwGvvvPfffvvvvvPGuJvfdf8A/wD15WEI++++8999+++++88+/sBMh91lELM9+++++8999+++++88898+i+++8+++++++++8999//xAAeEQEAAgICAwEAAAAAAAAAAAABEUAAMBAgITFQYP/aAAgBAwEBPxD8OfmYvBtTwmSYhZ4TVcOJsi4s7Rw2miH44K4LFcZ7Ka689Vs+l0rr26Pu63W6/lwFkdRXHYVx3FUaUphOtojad43oxwmkOEU47gR8n//EAB4RAAMBAAICAwAAAAAAAAAAAAERQAAgMFBgEEFw/9oACAECAQE/EPRyWZWL4fSyylWWXQsoVWIT4cSkXHkLBaLR+Ii0UngKTxE55Cc83KekH0twPrcjzzzzzzz8T//EACsQAQABAQcCBgIDAQAAAAAAAAERACExQVBRYXFAgSAwkaHB8LHREOHxYP/aAAgBAQABPxD/AJCTU8EySrw4fwyBCq5jEASxvTFGYXPFaJIhQsLqu9wFuv8ACKIyg6bV9/ZTUJWgC9aGoClcRzA24mYJWofJQSWglP4RkQtZb6lThvkj8UNlaAOBYr7+ymizU3C+KCECVESyvzm0mYllwVN+vWExmJm84CChUKWYpfeKgFiWlmbwzkhW9GHSPJQ7QHYzABKA1aB+Ho3o7oCmkNR9Gp7zTXVowp4aqtj1Ki1k0pB7NQLxdysY840LxdppLHIhR8kajk8SA3pLDupYetXOGhl9aJJ3pTQLgOPNQbwaVZ3BRQ3edD817LFpRUiNTIjph0Ma+Txe1DJdVa9ulvb4yrNJqllNWtVidctMGLVle9/BSMp5R6m1hGhfVw3XLn7qLAdWMTsFxzQttBgdutv01T5qFAMPqAsCrAXtXoY2N4qDMHXogEoqGfdoYeTHpU8YU2kPqvNXEF2RQ45Hham7yadG8eBUEKB2+cl71uCl0xxV50KlwC9am5w/0yfAKv0KEXb0G+uxq1ymSDLuvzREgj5yTsGLQ0oAALAsyq30z97TzbXLbI3q8LVatXKxW6pG3Hffy32q1/U2uWxbt9YogkjaeU0FiwnTE0BBAWGXShcej5Wg67LL54iT2xKMrhtPITFmH7ogFwRmE18c8n18ibW4wcuYui57T/fjG4QmixdS75jqRhWtaW+Kwm8KBBmSlgwOHxLe5fHzmfd7u8U7ZHp/3M+CvvZ8+K3q1+MzNsYE0oEx8ChNCjG7b65nMLEipOxHgUc6hBbM0uulngs8dWOAzT7m/g9jXsM0+9v4LfKp+izS63V9/B7xT9BmfN1CJL73gSSGsDRT3ozKRGCa2LHh4nM4SjMrY0XqfEeP8H+5nGwKuI/s8VtuDh/uKnMjoBD58UF3pZzW6pmKkVxTheMvE1hdD2HMZ3gD9qEAMPHBGHoOYjSGHLf8eQF2hFM4n7mXzmipw38vJirvrmGXwZuvwPKuSBTK03LVvRLcGrVrkq1avl2Q3WHbWhEkuyy1pvsWvmNpbUJa09NqMqeKb3ShsoAjzUfa0NTmoN98pjgLlqVMzap1PPUqi3Wu1QGSBYHDJyahZht3GjoWVyPZpRzXOI4ZKeAUKGH7Oeje4zZwo5CI3l5kc47N6YjtOH+3SwrRXCk+ETxkM2KS4VZC9jh06ce+lY00Zac0ASWnWvtSs7OJXdtaO1L1e9VAplxXqI8MuPVmoGsYlWaLu+tACCw6yKIaNYvfVDQIGg/bpxvuY1ajH5PWrKB+cghiG9I5oAVwycL91ZArp0JVkN2lvbBR8cJQsHkq85vFKHarCm9n4H3qXyQUpBJpNQ1PHDWlIB3oHs1R60Cs+2woww0s1iu1b8sHhXJTgjwitBPFEcKk/wDCp/4VHFO9GOtGr6xXtGEf8l//2Q==" width="449" height="468" class="img_Ne1E"></p><p>下一步是将我们的服务器进行HASH在环上找到自己的位置（可以是服务器+端口后对2^32取模），假设总共有4台服务，在环上的位置如下：</p><p><img loading="lazy" src="/assets/images/3-b7b97a7c1fc29a6808c6eb0158d4a8bb.jpg" width="714" height="727" class="img_Ne1E"></p><p>接下来是如何让数据定位到具体的Node上。</p><p>假设我们有 A ，B ，C ，D四个数据对象经过HASH之后可能是环上的某一个定位但不是Node位置，那么怎么办呢，我们顺时针往下走遇到的第一个Node就是我们要存储的服务器，如下图所示：</p><p><img loading="lazy" src="/assets/images/4-fb31a4af0cb5d2adc584ca37954d8969.jpg" width="704" height="719" class="img_Ne1E"></p><p>如果增加或删除服务器只会影响<strong>部分数据</strong></p><p>最后我们总结一致性HASH可以方便的增删服务并且只影响部分数据，注意：是解决了大部分数据问题，而不是所有。算是hash的增强。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="扩展阅读">扩展阅读<a href="#扩展阅读" class="hash-link" aria-label="扩展阅读的直接链接" title="扩展阅读的直接链接">​</a></h2><p>数据量少的情况下我们会遇到数据倾斜，需要加虚拟节点。需要的同学可以自行查询相关资料。</p>]]></content>
        <author>
            <name>xu gao</name>
            <uri>https://github.com/an0nymous</uri>
        </author>
        <category label="Java" term="Java"/>
        <category label="算法" term="算法"/>
    </entry>
</feed>